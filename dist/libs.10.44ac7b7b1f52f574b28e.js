webpackJsonp([10],{21:function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function init(){var e={code:["\n      <template>\n        <y-button params=\"type:'ghost', click:$parent.showModal\">显示弹框</y-button>\n        <y-modal params=\"visible: $parent.modalVisible, width:'700px',title:'普通的Modal对话框',ok: $parent.handleOk\">\n          <p>我说</p>\n          <p>短发短发</p>\n          <p>姑娘</p>\n        </y-modal>\n      </template>\n      <script>\n        var viewmodel = {\n          modalVisible: ko.observable(false),\n          showModal: () => {\n            viewmodel.modalVisible(true)\n          },\n          handleOk: function () {\n            window.ycloud.notice.info('你点击了确定！')\n          }\n        }\n      <\/script>\n      ","\n      <template>\n        <y-button params=\"type:'ghost', click:function(){$parent.showModal1($parents)}\">显示弹框</y-button>\n        <y-modal params=\"visible: $parent.modalVisible1, width:'700px',title:'添加校验的Modal对话框',validateFn:$root.validateFn,errormsg:'请至少选择一条数据！'\">\n          <y-grid params=\"ref:'modalgrid',columns: $root.columns,rows: $root.rows,onRowSelect:$root.onRowSelect,isStripe:true\"></y-grid>\n        </y-modal>\n      </template>\n      <script>\n        var viewmodel = {\n          modalVisible1: ko.observable(false),\n          showModal1: (val) => {\n            viewmodel.modalVisible1(true)\n          },\n          rows: ko.observableArray([\n            {id: ko.observable(1), name: ko.observable('李明')},\n            {id: ko.observable(2), name: ko.observable('韩梅梅')},\n            {id: ko.observable(3), name: ko.observable('丹尼')}\n          ]),\n          columns: ko.observableArray([\n            {\n              title: '',\n              field: 'id',\n              type: 'checkbox',\n              hidden: false,\n              width: 50\n            },\n            {\n              title: 'name',\n              field: 'name',\n              width: '20%'\n            },\n            {\n              field: 'id',\n              title: 'renderFn',\n              type: 'render',\n              hidden: false,\n              renderFn: function (row, index) {\n                return '<span>通过render函数生成的html片段<span>'\n              }\n            }, {\n              field: 'id',\n              title: 'operation',\n              hidden: false,\n              type: 'operation',\n              width: '20%',\n              operationList: [\n                {\n                  title: '操作1',\n                  click: function (row, evt) {\n                    alert('操作1')\n                  }\n                }\n              ]\n            }\n          ]),\n          onRowSelect: function (row) {},\n          validateFn: function () {\n            let grid = window.ycloud.$refs['modalgrid']\n            if (grid.getSelectedRows().length > 0) {\n              return true\n            } else {\n              return false\n            }\n          }\n        } \n      <\/script>\n      ","\n      <template>\n        <y-button params=\"type:'ghost', click:$parent.showModal2\">显示弹框</y-button>\n        <y-modal params=\"visible: $parent.modalVisible2, width:'700px',title:'自动适配高度的Modal对话框'\">\n          <span>百家姓: </span>\n          <y-grid params=\"modalBodyModalHeight:bodyMaxHeight,modalBodyExtraHeight:'20px',onRowSelect:$root.onRowSelect,columns: $root.columns,rows: $root.rows2,lockhead:true\"></y-grid>\n        </y-modal>\n      </template>\n      <script>\n        var viewmodel = {\n          modalVisible2: ko.observable(false),\n          showModal2: (val) => {\n            viewmodel.modalVisible2(true)\n          },\n          rows2: ko.observableArray([\n            {id: ko.observable(1), name: ko.observable('赵')},\n            {id: ko.observable(2), name: ko.observable('钱')},\n            {id: ko.observable(3), name: ko.observable('孙')},\n            {id: ko.observable(1), name: ko.observable('李')},\n            {id: ko.observable(2), name: ko.observable('周')},\n            {id: ko.observable(3), name: ko.observable('吴')},\n            {id: ko.observable(1), name: ko.observable('郑')},\n            {id: ko.observable(2), name: ko.observable('王')},\n            {id: ko.observable(3), name: ko.observable('冯')},\n            {id: ko.observable(3), name: ko.observable('陈')},\n            {id: ko.observable(3), name: ko.observable('褚')},\n            {id: ko.observable(3), name: ko.observable('卫')}\n          ]),\n          columns: ko.observableArray([\n            {\n              title: '',\n              field: 'id',\n              type: 'checkbox',\n              hidden: false,\n              width: 50\n            },\n            {\n              title: 'name',\n              field: 'name',\n              width: '20%'\n            },\n            {\n              field: 'id',\n              title: 'renderFn',\n              type: 'render',\n              hidden: false,\n              renderFn: function (row, index) {\n                return '<span>通过render函数生成的html片段<span>'\n              }\n            }, {\n              field: 'id',\n              title: 'operation',\n              hidden: false,\n              type: 'operation',\n              width: '20%',\n              operationList: [\n                {\n                  title: '操作',\n                  click: function (row, evt) {\n                    alert('操作')\n                  }\n                }\n              ]\n            }\n          ])\n        }\n      <\/script>\n      "],modalVisible:a.default.observable(!1),showModal:function(t){e.modalVisible(!0)},modalVisible1:a.default.observable(!1),showModal1:function(t){e.modalVisible1(!0)},modalVisible2:a.default.observable(!1),showModal2:function(t){e.modalVisible2(!0)},rows:a.default.observableArray([{id:a.default.observable(1),name:a.default.observable("李明")},{id:a.default.observable(2),name:a.default.observable("韩梅梅")},{id:a.default.observable(3),name:a.default.observable("丹尼")}]),rows2:a.default.observableArray([{id:a.default.observable(1),name:a.default.observable("赵")},{id:a.default.observable(2),name:a.default.observable("钱")},{id:a.default.observable(3),name:a.default.observable("孙")},{id:a.default.observable(1),name:a.default.observable("李")},{id:a.default.observable(2),name:a.default.observable("周")},{id:a.default.observable(3),name:a.default.observable("吴")},{id:a.default.observable(1),name:a.default.observable("郑")},{id:a.default.observable(2),name:a.default.observable("王")},{id:a.default.observable(3),name:a.default.observable("冯")},{id:a.default.observable(3),name:a.default.observable("陈")},{id:a.default.observable(3),name:a.default.observable("褚")},{id:a.default.observable(3),name:a.default.observable("卫")}]),columns:a.default.observableArray([{title:"",field:"id",type:"checkbox",hidden:!1,width:50},{title:"name",field:"name",width:"20%"},{field:"id",title:"renderFn",type:"render",hidden:!1,renderFn:function(e,t){return"<span>通过render函数生成的html片段<span>"}},{field:"id",title:"operation",hidden:!1,type:"operation",width:"20%",operationList:[{title:"操作",click:function(e,t){alert("操作")}}]}]),onRowSelect:function(e){},validateFn:function(){return window.ycloud.$refs.modalgrid.getSelectedRows().length>0},handleOk:function(){window.ycloud.notice.info("你点击了确定！")}};a.default.applyBindings(e,document.getElementById("app"))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(65),i=_interopRequireDefault(o),r=n(0),a=_interopRequireDefault(r);n(41),t.default={template:i.default,init:init}},41:function(e,t,n){"use strict";n(42),n(57)},42:function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function init(e){this.code=e.code,this.isShowAll=a.default.observable(!1),this.toggle=function(){this.isShowAll(!this.isShowAll())}.bind(this)}var o=n(43),i=_interopRequireDefault(o);n(44),n(45);var r=n(0),a=_interopRequireDefault(r);a.default.components.register("demo",{viewModel:init,template:i.default})},43:function(e,t){e.exports='<div class="demo">\r\n  <div class="demo-show">\r\n  \x3c!-- ko template: { nodes: $componentTemplateNodes } --\x3e\x3c!-- /ko --\x3e\r\n  </div>\r\n  <div class="demo-split"></div>\r\n  <div class="demo-code" data-bind="css:{\'demo-hideCode\':!isShowAll()}">\r\n    <y-code params="code:code"></y-code>\r\n  </div>\r\n  <div class="demo-toggle" data-bind="click:toggle"><span class="fa" data-bind="css:{\'fa-angle-double-down\':!isShowAll(),\'fa-angle-double-up\':isShowAll()}"></span></div>\r\n</div>\r\n'},44:function(e,t){},45:function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Init(e,t){var n=this;this.$el=t.childNodes[0].childNodes[3],this.code=e.code,this.copy=function(){var t=new c.default(".copy",{text:function(){return e.code}});t.on("success",function(e){e.clearSelection(),t.destroy(),window.alert("代码已复制到剪贴板")})},setTimeout(function(){s.default.highlightBlock(n.$el)})}var o=n(46),i=_interopRequireDefault(o);n(47);var r=n(0),a=_interopRequireDefault(r),l=n(3),s=_interopRequireDefault(l),d=n(48),c=_interopRequireDefault(d);n(56),a.default.components.register("y-code",{viewModel:{createViewModel:function(e,t){return new Init(e,t.element)}},template:i.default})},46:function(e,t){e.exports='<div class="code">\r\n  <div class="tools">\r\n    <i class="fa fa-clipboard copy" data-bind="click: copy"></i>\r\n  </div>\r\n  <pre><code class="html" data-bind="text: code"></code></pre>\r\n</div>\r\n'},47:function(e,t){},48:function(e,t,n){var o,i,r;!function(a,l){i=[e,n(49),n(51),n(52)],o=l,void 0!==(r="function"==typeof o?o.apply(t,i):o)&&(e.exports=r)}(0,function(e,t,n,o){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function getAttributeValue(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var i=_interopRequireDefault(t),r=_interopRequireDefault(n),a=_interopRequireDefault(o),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),d=function(e){function Clipboard(e,t){_classCallCheck(this,Clipboard);var n=_possibleConstructorReturn(this,(Clipboard.__proto__||Object.getPrototypeOf(Clipboard)).call(this));return n.resolveOptions(t),n.listenClick(e),n}return _inherits(Clipboard,e),s(Clipboard,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===l(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,a.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return getAttributeValue("action",e)}},{key:"defaultTarget",value:function(e){var t=getAttributeValue("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return getAttributeValue("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),Clipboard}(r.default);e.exports=d})},49:function(e,t,n){var o,i,r;!function(a,l){i=[e,n(50)],o=l,void 0!==(r="function"==typeof o?o.apply(t,i):o)&&(e.exports=r)}(0,function(e,t){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(e){return e&&e.__esModule?e:{default:e}}(t),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=function(){function ClipboardAction(e){_classCallCheck(this,ClipboardAction),this.resolveOptions(e),this.initSelection()}return i(ClipboardAction,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=o+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,n.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,n.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":o(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),ClipboardAction}();e.exports=r})},50:function(e,t){function select(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var o=window.getSelection(),i=document.createRange();i.selectNodeContents(e),o.removeAllRanges(),o.addRange(i),t=o.toString()}return t}e.exports=select},51:function(e,t){function E(){}E.prototype={on:function(e,t,n){var o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function listener(){o.off(e,listener),t.apply(n,arguments)}var o=this;return listener._=t,this.on(e,listener,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),o=0,i=n.length;for(o;o<i;o++)n[o].fn.apply(n[o].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),o=n[e],i=[];if(o&&t)for(var r=0,a=o.length;r<a;r++)o[r].fn!==t&&o[r].fn._!==t&&i.push(o[r]);return i.length?n[e]=i:delete n[e],this}},e.exports=E},52:function(e,t,n){function listen(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!o.string(t))throw new TypeError("Second argument must be a String");if(!o.fn(n))throw new TypeError("Third argument must be a Function");if(o.node(e))return listenNode(e,t,n);if(o.nodeList(e))return listenNodeList(e,t,n);if(o.string(e))return listenSelector(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function listenNode(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function listenNodeList(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function listenSelector(e,t,n){return i(document.body,e,t,n)}var o=n(53),i=n(54);e.exports=listen},53:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},54:function(e,t,n){function _delegate(e,t,n,o,i){var r=listener.apply(this,arguments);return e.addEventListener(n,r,i),{destroy:function(){e.removeEventListener(n,r,i)}}}function delegate(e,t,n,o,i){return"function"==typeof e.addEventListener?_delegate.apply(null,arguments):"function"==typeof n?_delegate.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return _delegate(e,t,n,o,i)}))}function listener(e,t,n,i){return function(n){n.delegateTarget=o(n.target,t),n.delegateTarget&&i.call(e,n)}}var o=n(55);e.exports=delegate},55:function(e,t){function closest(e,t){for(;e&&e.nodeType!==n;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}e.exports=closest},56:function(e,t){},57:function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function init(e){this.name=e.name||"",this.link=e.link||""}var o=n(58),i=_interopRequireDefault(o);_interopRequireDefault(n(0)).default.components.register("y-title",{viewModel:init,template:i.default})},58:function(e,t){e.exports='<h1>\r\n  <span data-bind="text: name"></span>组件\r\n</h1>\r\n\x3c!-- ko if: link--\x3e\r\n<h2>\r\n  <a data-bind="attr: {href: link}" target="_blank" style="color: #2baee9">\r\n    <span data-bind="text: name"></span>组件API文档\r\n  </a>\r\n</h2>\r\n\x3c!-- /ko --\x3e\r\n<h2>代码示例</h2>\r\n'},65:function(e,t){e.exports='<div class="y-box">\r\n  <y-title params="name: \'model模态框\', link: \'https://github.com/yonyouyc/blog/issues/38\'"></y-title>\r\n    <demo params="code:code[0]">\r\n      <div class="code-top">\r\n        <y-button params="type:\'ghost\', click:$parent.showModal">显示弹框</y-button>\r\n        <y-modal params="visible: $parent.modalVisible, width:\'700px\', title:\'普通的Modal对话框\', ok: $parent.handleOk">\r\n          <p>我说</p>\r\n          <p>短发短发</p>\r\n          <p>姑娘</p>\r\n        </y-modal>\r\n      </div>\r\n      <div class="code-split">\r\n        <span>基础用法</span>\r\n      </div>\r\n      <div class="code-bottom">\r\n        最简单的使用方法，通过控制属性visible来显示 / 隐藏对话框。<br>\r\n      </div>\r\n    </demo>\r\n\r\n    <demo params="code:code[1]">\r\n      <div class="code-top">\r\n        <y-button params="type:\'ghost\', click:function(){$parent.showModal1($parents)}">显示弹框</y-button>\r\n        <y-modal params="visible: $parent.modalVisible1, width:\'700px\',title:\'添加校验的Modal对话框\',validateFn:$root.validateFn,errormsg:\'请至少选择一条数据！\'">\r\n          <y-grid params="ref:\'modalgrid\',columns: $root.columns,rows: $root.rows,onRowSelect:$root.onRowSelect,isStripe:true"></y-grid>\r\n        </y-modal>\r\n      </div>\r\n      <div class="code-split">\r\n        <span>校验对话框</span>\r\n      </div>\r\n      <div class="code-bottom">\r\n        绑定modal的<code>validateFn</code>事件，通过自定义规则阻止模态框的确定事件触发并给出提示。<br>\r\n      </div>\r\n    </demo>\r\n\r\n    <demo params="code:code[2]">\r\n      <div class="code-top">\r\n        <y-button params="type:\'ghost\', click:$parent.showModal2">显示弹框</y-button>\r\n        <y-modal params="visible: $parent.modalVisible2, width:\'700px\',title:\'自动适配高度的Modal对话框\'">\r\n          <span>百家姓: </span>\r\n          <y-grid params="modalBodyModalHeight:bodyMaxHeight,modalBodyExtraHeight:\'20px\',onRowSelect:$root.onRowSelect,columns: $root.columns,rows: $root.rows2,lockhead:true"></y-grid>\r\n        </y-modal>\r\n      </div>\r\n      <div class="code-split">\r\n        <span>自动适配高度的Modal对话框</span>\r\n      </div>\r\n      <div class="code-bottom">\r\n        将modal的<code>bodyMaxHeight</code>传递给下层组件的modalBodyModalHeight(目前只适用于grid组件)，使得下层组件的高度自动适配。<br>\r\n        modalBodyExtraHeight属性，是modal内部除去grid的高度以外还有哪些高度要去除，例如本例的百家姓。\r\n      </div>\r\n    </demo>\r\n  </div>\r\n'}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbGlicy4xMC40NGFjN2I3YjFmNTJmNTc0YjI4ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3MvbW9kYWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvZGVtby9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9kZW1vL2luZGV4Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvY29kZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb2RlL2luZGV4Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsaXBib2FyZC9saWIvY2xpcGJvYXJkLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jbGlwYm9hcmQvbGliL2NsaXBib2FyZC1hY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NlbGVjdC9zcmMvc2VsZWN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90aW55LWVtaXR0ZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2dvb2QtbGlzdGVuZXIvc3JjL2xpc3Rlbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZ29vZC1saXN0ZW5lci9zcmMvaXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RlbGVnYXRlL3NyYy9kZWxlZ2F0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGVsZWdhdGUvc3JjL2Nsb3Nlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGl0bGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdGl0bGUvaW5kZXguaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3MvbW9kYWwvaW5kZXguaHRtbCJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnAiLCIyMSIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiaW5pdCIsInZpZXdtb2RlbCIsImNvZGUiLCJtb2RhbFZpc2libGUiLCJfa25vY2tvdXQyIiwib2JzZXJ2YWJsZSIsInNob3dNb2RhbCIsInZhbCIsIm1vZGFsVmlzaWJsZTEiLCJzaG93TW9kYWwxIiwibW9kYWxWaXNpYmxlMiIsInNob3dNb2RhbDIiLCJyb3dzIiwib2JzZXJ2YWJsZUFycmF5IiwiaWQiLCJuYW1lIiwicm93czIiLCJjb2x1bW5zIiwidGl0bGUiLCJmaWVsZCIsInR5cGUiLCJoaWRkZW4iLCJ3aWR0aCIsInJlbmRlckZuIiwicm93IiwiaW5kZXgiLCJvcGVyYXRpb25MaXN0IiwiY2xpY2siLCJldnQiLCJhbGVydCIsIm9uUm93U2VsZWN0IiwidmFsaWRhdGVGbiIsIndpbmRvdyIsInljbG91ZCIsIiRyZWZzIiwiZ2V0U2VsZWN0ZWRSb3dzIiwibGVuZ3RoIiwiaGFuZGxlT2siLCJub3RpY2UiLCJpbmZvIiwiYXBwbHlCaW5kaW5ncyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX2luZGV4IiwiX2luZGV4MiIsIl9rbm9ja291dCIsInRlbXBsYXRlIiwiNDEiLCI0MiIsInBhcmFtcyIsInRoaXMiLCJpc1Nob3dBbGwiLCJ0b2dnbGUiLCJiaW5kIiwiY29tcG9uZW50cyIsInJlZ2lzdGVyIiwidmlld01vZGVsIiwiNDMiLCI0NCIsIjQ1IiwiSW5pdCIsImVsIiwiX3RoaXMiLCIkZWwiLCJjaGlsZE5vZGVzIiwiY29weSIsImNsaXBib2FyZCIsIl9jbGlwYm9hcmQyIiwidGV4dCIsIm9uIiwiZSIsImNsZWFyU2VsZWN0aW9uIiwiZGVzdHJveSIsInNldFRpbWVvdXQiLCJfaGlnaGxpZ2h0anMyIiwiaGlnaGxpZ2h0QmxvY2siLCJfaGlnaGxpZ2h0anMiLCJfY2xpcGJvYXJkIiwiY3JlYXRlVmlld01vZGVsIiwiY29tcG9uZW50SW5mbyIsImVsZW1lbnQiLCI0NiIsIjQ3IiwiNDgiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18iLCJnbG9iYWwiLCJmYWN0b3J5IiwidW5kZWZpbmVkIiwiYXBwbHkiLCJfY2xpcGJvYXJkQWN0aW9uIiwiX3RpbnlFbWl0dGVyIiwiX2dvb2RMaXN0ZW5lciIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJjYWxsIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZ2V0QXR0cmlidXRlVmFsdWUiLCJzdWZmaXgiLCJhdHRyaWJ1dGUiLCJoYXNBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJfY2xpcGJvYXJkQWN0aW9uMiIsIl90aW55RW1pdHRlcjIiLCJfZ29vZExpc3RlbmVyMiIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJkZXNjcmlwdG9yIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiQ2xpcGJvYXJkIiwiX0VtaXR0ZXIiLCJ0cmlnZ2VyIiwib3B0aW9ucyIsImdldFByb3RvdHlwZU9mIiwicmVzb2x2ZU9wdGlvbnMiLCJsaXN0ZW5DbGljayIsImFyZ3VtZW50cyIsImFjdGlvbiIsImRlZmF1bHRBY3Rpb24iLCJkZWZhdWx0VGFyZ2V0IiwiZGVmYXVsdFRleHQiLCJjb250YWluZXIiLCJib2R5IiwiX3RoaXMyIiwibGlzdGVuZXIiLCJvbkNsaWNrIiwiZGVsZWdhdGVUYXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY2xpcGJvYXJkQWN0aW9uIiwiZW1pdHRlciIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImFjdGlvbnMiLCJzdXBwb3J0IiwicXVlcnlDb21tYW5kU3VwcG9ydGVkIiwiZm9yRWFjaCIsIjQ5IiwiX3NlbGVjdCIsIl9zZWxlY3QyIiwiQ2xpcGJvYXJkQWN0aW9uIiwiaW5pdFNlbGVjdGlvbiIsInNlbGVjdGVkVGV4dCIsInNlbGVjdEZha2UiLCJzZWxlY3RUYXJnZXQiLCJpc1JUTCIsImRvY3VtZW50RWxlbWVudCIsInJlbW92ZUZha2UiLCJmYWtlSGFuZGxlckNhbGxiYWNrIiwiZmFrZUhhbmRsZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZmFrZUVsZW0iLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJmb250U2l6ZSIsImJvcmRlciIsInBhZGRpbmciLCJtYXJnaW4iLCJwb3NpdGlvbiIsInlQb3NpdGlvbiIsInBhZ2VZT2Zmc2V0Iiwic2Nyb2xsVG9wIiwidG9wIiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJjb3B5VGV4dCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVDaGlsZCIsInN1Y2NlZWRlZCIsImV4ZWNDb21tYW5kIiwiZXJyIiwiaGFuZGxlUmVzdWx0IiwiZW1pdCIsImZvY3VzIiwiZ2V0U2VsZWN0aW9uIiwicmVtb3ZlQWxsUmFuZ2VzIiwic2V0IiwiX2FjdGlvbiIsIkVycm9yIiwiZ2V0Iiwibm9kZVR5cGUiLCJfdGFyZ2V0IiwiNTAiLCJzZWxlY3QiLCJub2RlTmFtZSIsImlzUmVhZE9ubHkiLCJzZXRTZWxlY3Rpb25SYW5nZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNlbGVjdGlvbiIsInJhbmdlIiwiY3JlYXRlUmFuZ2UiLCJzZWxlY3ROb2RlQ29udGVudHMiLCJhZGRSYW5nZSIsInRvU3RyaW5nIiwiNTEiLCJFIiwiY2FsbGJhY2siLCJjdHgiLCJwdXNoIiwiZm4iLCJvbmNlIiwib2ZmIiwiXyIsImRhdGEiLCJzbGljZSIsImV2dEFyciIsImxlbiIsImV2dHMiLCJsaXZlRXZlbnRzIiwiNTIiLCJsaXN0ZW4iLCJpcyIsInN0cmluZyIsIm5vZGUiLCJsaXN0ZW5Ob2RlIiwibm9kZUxpc3QiLCJsaXN0ZW5Ob2RlTGlzdCIsImxpc3RlblNlbGVjdG9yIiwiQXJyYXkiLCJkZWxlZ2F0ZSIsIjUzIiwiSFRNTEVsZW1lbnQiLCJTdHJpbmciLCI1NCIsIl9kZWxlZ2F0ZSIsInVzZUNhcHR1cmUiLCJsaXN0ZW5lckZuIiwiZWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibWFwIiwiY2xvc2VzdCIsIjU1IiwiRE9DVU1FTlRfTk9ERV9UWVBFIiwibWF0Y2hlcyIsInBhcmVudE5vZGUiLCJFbGVtZW50IiwicHJvdG8iLCJtYXRjaGVzU2VsZWN0b3IiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJtc01hdGNoZXNTZWxlY3RvciIsIm9NYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCI1NiIsIjU3IiwibGluayIsIjU4IiwiNjUiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLEtBRVJDLEdBQ0EsU0FBVUMsRUFBUUMsRUFBU0MsR0FFakMsWUFpQkEsU0FBU0Msd0JBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdDbkJ2RixRQUFTRyxRQUNQLEdBQUlDLElBQ0ZDLE1BQU0seXdLQStKTkMsYUFBY0MsRUFBQUwsUUFBR00sWUFBVyxHQUM1QkMsVUFBVyxTQUFDQyxHQUNWTixFQUFVRSxjQUFhLElBR3pCSyxjQUFlSixFQUFBTCxRQUFHTSxZQUFXLEdBQzdCSSxXQUFZLFNBQUNGLEdBQ1hOLEVBQVVPLGVBQWMsSUFHMUJFLGNBQWVOLEVBQUFMLFFBQUdNLFlBQVcsR0FDN0JNLFdBQVksU0FBQ0osR0FDWE4sRUFBVVMsZUFBYyxJQUUxQkUsS0FBTVIsRUFBQUwsUUFBR2Msa0JBQ05DLEdBQUlWLEVBQUFMLFFBQUdNLFdBQVcsR0FBSVUsS0FBTVgsRUFBQUwsUUFBR00sV0FBVyxRQUMxQ1MsR0FBSVYsRUFBQUwsUUFBR00sV0FBVyxHQUFJVSxLQUFNWCxFQUFBTCxRQUFHTSxXQUFXLFNBQzFDUyxHQUFJVixFQUFBTCxRQUFHTSxXQUFXLEdBQUlVLEtBQU1YLEVBQUFMLFFBQUdNLFdBQVcsU0FFN0NXLE1BQU9aLEVBQUFMLFFBQUdjLGtCQUNQQyxHQUFJVixFQUFBTCxRQUFHTSxXQUFXLEdBQUlVLEtBQU1YLEVBQUFMLFFBQUdNLFdBQVcsT0FDMUNTLEdBQUlWLEVBQUFMLFFBQUdNLFdBQVcsR0FBSVUsS0FBTVgsRUFBQUwsUUFBR00sV0FBVyxPQUMxQ1MsR0FBSVYsRUFBQUwsUUFBR00sV0FBVyxHQUFJVSxLQUFNWCxFQUFBTCxRQUFHTSxXQUFXLE9BQzFDUyxHQUFJVixFQUFBTCxRQUFHTSxXQUFXLEdBQUlVLEtBQU1YLEVBQUFMLFFBQUdNLFdBQVcsT0FDMUNTLEdBQUlWLEVBQUFMLFFBQUdNLFdBQVcsR0FBSVUsS0FBTVgsRUFBQUwsUUFBR00sV0FBVyxPQUMxQ1MsR0FBSVYsRUFBQUwsUUFBR00sV0FBVyxHQUFJVSxLQUFNWCxFQUFBTCxRQUFHTSxXQUFXLE9BQzFDUyxHQUFJVixFQUFBTCxRQUFHTSxXQUFXLEdBQUlVLEtBQU1YLEVBQUFMLFFBQUdNLFdBQVcsT0FDMUNTLEdBQUlWLEVBQUFMLFFBQUdNLFdBQVcsR0FBSVUsS0FBTVgsRUFBQUwsUUFBR00sV0FBVyxPQUMxQ1MsR0FBSVYsRUFBQUwsUUFBR00sV0FBVyxHQUFJVSxLQUFNWCxFQUFBTCxRQUFHTSxXQUFXLE9BQzFDUyxHQUFJVixFQUFBTCxRQUFHTSxXQUFXLEdBQUlVLEtBQU1YLEVBQUFMLFFBQUdNLFdBQVcsT0FDMUNTLEdBQUlWLEVBQUFMLFFBQUdNLFdBQVcsR0FBSVUsS0FBTVgsRUFBQUwsUUFBR00sV0FBVyxPQUMxQ1MsR0FBSVYsRUFBQUwsUUFBR00sV0FBVyxHQUFJVSxLQUFNWCxFQUFBTCxRQUFHTSxXQUFXLFFBRTdDWSxRQUFTYixFQUFBTCxRQUFHYyxrQkFFUkssTUFBTyxHQUNQQyxNQUFPLEtBQ1BDLEtBQU0sV0FDTkMsUUFBUSxFQUNSQyxNQUFPLEtBR1BKLE1BQU8sT0FDUEMsTUFBTyxPQUNQRyxNQUFPLFFBR1BILE1BQU8sS0FDUEQsTUFBTyxXQUNQRSxLQUFNLFNBQ05DLFFBQVEsRUFDUkUsU0FBVSxTQUFVQyxFQUFLQyxHQUN2QixNQUFPLHFDQUdUTixNQUFPLEtBQ1BELE1BQU8sWUFDUEcsUUFBUSxFQUNSRCxLQUFNLFlBQ05FLE1BQU8sTUFDUEksZ0JBRUlSLE1BQU8sS0FDUFMsTUFBTyxTQUFVSCxFQUFLSSxHQUNwQkMsTUFBTSxZQU1oQkMsWUFBYSxTQUFVTixLQUN2Qk8sV0FBWSxXQUVWLE1BRFdDLFFBQU9DLE9BQU9DLE1BQWQsVUFDRkMsa0JBQWtCQyxPQUFTLEdBTXRDQyxTQUFVLFdBQ1JMLE9BQU9DLE9BQU9LLE9BQU9DLEtBQUssWUFHOUJuQyxHQUFBTCxRQUFHeUMsY0FBY3ZDLEVBQVd3QyxTQUFTQyxlQUFlLFFEL090REMsT0FBT0MsZUFBZWxELEVBQVMsY0FDN0JtRCxPQUFPLEdDVFQsSUFBQUMsR0FBQW5ELEVBQUEsSURjSW9ELEVBQVVuRCx1QkFBdUJrRCxHQ2JyQ0UsRUFBQXJELEVBQUEsR0RpQklTLEVBQWFSLHVCQUF1Qm9ELEVDaEJ4Q3JELEdBQUEsSUR3RkFELEVBQVFLLFNDZ0tOa0QsbUJBQ0FqRCxZRDFKSWtELEdBQ0EsU0FBVXpELEVBQVFDLEVBQVNDLEdBRWpDLFlFcEdBQSxHQUFBLElBQ0FBLEVBQUEsS0Y0R013RCxHQUNBLFNBQVUxRCxFQUFRQyxFQUFTQyxHQUVqQyxZQWVBLFNBQVNDLHdCQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHRzNIdkYsUUFBU0csTUFBTW9ELEdBQ2JDLEtBQUtuRCxLQUFPa0QsRUFBT2xELEtBQ25CbUQsS0FBS0MsVUFBWWxELEVBQUFMLFFBQUdNLFlBQVcsR0FDL0JnRCxLQUFLRSxPQUFTLFdBQ1pGLEtBQUtDLFdBQVdELEtBQUtDLGNBQ3JCRSxLQUFLSCxNQVRULEdBQUFQLEdBQUFuRCxFQUFBLElIcUhJb0QsRUFBVW5ELHVCQUF1QmtELEVHcEhyQ25ELEdBQUEsSUFDQUEsRUFBQSxHQUNBLElBQUFxRCxHQUFBckQsRUFBQSxHSDBISVMsRUFBYVIsdUJBQXVCb0QsRUdsSHhDNUMsR0FBQUwsUUFBRzBELFdBQVdDLFNBQVMsUUFDckJDLFVBQVczRCxLQUNYaUQsc0JIa0lJVyxHQUNBLFNBQVVuRSxFQUFRQyxHSWhKeEJELEVBQUFDLFFBQUEsOGZKc0pNbUUsR0FDQSxTQUFVcEUsRUFBUUMsS0FNbEJvRSxHQUNBLFNBQVVyRSxFQUFRQyxFQUFTQyxHQUVqQyxZQXVCQSxTQUFTQyx3QkFBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0toTHZGLFFBQVNrRSxNQUFNWCxFQUFRWSxHQUFJLEdBQUFDLEdBQUFaLElBRXpCQSxNQUFLYSxJQUFNRixFQUFHRyxXQUFXLEdBQUdBLFdBQVcsR0FDdkNkLEtBQUtuRCxLQUFPa0QsRUFBT2xELEtBQ25CbUQsS0FBS2UsS0FBTyxXQUNWLEdBQU1DLEdBQVksR0FBQUMsR0FBQXZFLFFBQWMsU0FDOUJ3RSxLQUR1QyxXQUVyQyxNQUFPbkIsR0FBT2xELE9BR2xCbUUsR0FBVUcsR0FBRyxVQUFXLFNBQUNDLEdBQ3ZCQSxFQUFFQyxpQkFDRkwsRUFBVU0sVUFDVjNDLE9BQU9ILE1BQU0sZ0JBR2pCK0MsV0FBVyxXQUNUQyxFQUFBOUUsUUFBSytFLGVBQWViLEVBQUtDLE9BeEI3QixHQUFBcEIsR0FBQW5ELEVBQUEsSUxxS0lvRCxFQUFVbkQsdUJBQXVCa0QsRUtwS3JDbkQsR0FBQSxHQUNBLElBQUFxRCxHQUFBckQsRUFBQSxHTHlLSVMsRUFBYVIsdUJBQXVCb0QsR0t4S3hDK0IsRUFBQXBGLEVBQUEsR0w0S0lrRixFQUFnQmpGLHVCQUF1Qm1GLEdLM0szQ0MsRUFBQXJGLEVBQUEsSUwrS0kyRSxFQUFjMUUsdUJBQXVCb0YsRUs5S3pDckYsR0FBQSxJQXNCQVMsRUFBQUwsUUFBRzBELFdBQVdDLFNBQVMsVUFDckJDLFdBQ0VzQixnQkFBaUIsU0FBVTdCLEVBQVE4QixHQUNqQyxNQUFPLElBQUluQixNQUFLWCxFQUFROEIsRUFBY0MsV0FHMUNsQyxzQkwwTEltQyxHQUNBLFNBQVUzRixFQUFRQyxHTTVOeEJELEVBQUFDLFFBQUEsK01Oa09NMkYsR0FDQSxTQUFVNUYsRUFBUUMsS0FNbEI0RixHQUNBLFNBQVU3RixFQUFRQyxFQUFTQyxHTzFPakMsR0FBQTRGLEdBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUMsR0FFQUgsR0FBQS9GLEVBQUFFLEVBQUEsSUFBQUEsRUFBQSxJQUFBQSxFQUFBLEtBQUE0RixFQUFBLE1BQUFLLE1BQUFILEVBQUEsa0JBQUFGLEtBQUFNLE1BQUFuRyxFQUFBOEYsR0FBQUQsS0FBQTlGLEVBQUFDLFFBQUErRixJQVVDcEMsRUFBQSxTQUFBNUQsRUFBQXFHLEVBQUFDLEVBQUFDLEdBQ0QsWUFRQSxTQUFBcEcsd0JBQUFDLEdBQ0EsTUFBQUEsTUFBQUMsV0FBQUQsR0FDQUUsUUFBQUYsR0FVQSxRQUFBb0csaUJBQUFDLEVBQUFDLEdBQ0EsS0FBQUQsWUFBQUMsSUFDQSxTQUFBQyxXQUFBLHFDQXNCQSxRQUFBQyw0QkFBQUMsRUFBQUMsR0FDQSxJQUFBRCxFQUNBLFNBQUFFLGdCQUFBLDREQUdBLFFBQUFELEdBQUEsZ0JBQUFBLElBQUEsa0JBQUFBLEdBQUFELEVBQUFDLEVBR0EsUUFBQUUsV0FBQUMsRUFBQUMsR0FDQSxxQkFBQUEsSUFBQSxPQUFBQSxFQUNBLFNBQUFQLFdBQUEsaUVBQUFPLEdBR0FELEdBQUFFLFVBQUFqRSxPQUFBa0UsT0FBQUYsS0FBQUMsV0FDQUUsYUFDQWpFLE1BQUE2RCxFQUNBSyxZQUFBLEVBQ0FDLFVBQUEsRUFDQUMsY0FBQSxLQUdBTixJQUFBaEUsT0FBQXVFLGVBQUF2RSxPQUFBdUUsZUFBQVIsRUFBQUMsR0FBQUQsRUFBQVMsVUFBQVIsR0FxSEEsUUFBQVMsbUJBQUFDLEVBQUFsQyxHQUNBLEdBQUFtQyxHQUFBLGtCQUFBRCxDQUVBLElBQUFsQyxFQUFBb0MsYUFBQUQsR0FJQSxNQUFBbkMsR0FBQXFDLGFBQUFGLEdBM0xBLEdBQUFHLEdBQUE3SCx1QkFBQWtHLEdBRUE0QixFQUFBOUgsdUJBQUFtRyxHQUVBNEIsRUFBQS9ILHVCQUFBb0csR0FRQTRCLEVBQUEsa0JBQUFDLFNBQUEsZ0JBQUFBLFFBQUFDLFNBQUEsU0FBQWpJLEdBQ0EsYUFBQUEsSUFDSyxTQUFBQSxHQUNMLE1BQUFBLElBQUEsa0JBQUFnSSxTQUFBaEksRUFBQWlILGNBQUFlLFFBQUFoSSxJQUFBZ0ksT0FBQWpCLFVBQUEsZUFBQS9HLElBU0FrSSxFQUFBLFdBQ0EsUUFBQUMsa0JBQUFDLEVBQUFDLEdBQ0EsT0FBQUMsR0FBQSxFQUEyQkEsRUFBQUQsRUFBQTlGLE9BQWtCK0YsSUFBQSxDQUM3QyxHQUFBQyxHQUFBRixFQUFBQyxFQUNBQyxHQUFBckIsV0FBQXFCLEVBQUFyQixhQUFBLEVBQ0FxQixFQUFBbkIsY0FBQSxFQUNBLFNBQUFtQixPQUFBcEIsVUFBQSxHQUNBckUsT0FBQUMsZUFBQXFGLEVBQUFHLEVBQUFDLElBQUFELElBSUEsZ0JBQUFqQyxFQUFBbUMsRUFBQUMsR0FHQSxNQUZBRCxJQUFBTixpQkFBQTdCLEVBQUFTLFVBQUEwQixHQUNBQyxHQUFBUCxpQkFBQTdCLEVBQUFvQyxHQUNBcEMsTUE0QkFxQyxFQUFBLFNBQUFDLEdBT0EsUUFBQUQsV0FBQUUsRUFBQUMsR0FDQTFDLGdCQUFBNUMsS0FBQW1GLFVBRUEsSUFBQXZFLEdBQUFvQywyQkFBQWhELE1BQUFtRixVQUFBckIsV0FBQXhFLE9BQUFpRyxlQUFBSixZQUFBakMsS0FBQWxELE1BSUEsT0FGQVksR0FBQTRFLGVBQUFGLEdBQ0ExRSxFQUFBNkUsWUFBQUosR0FDQXpFLEVBNEZBLE1BekdBd0MsV0FBQStCLFVBQUFDLEdBdUJBVixFQUFBUyxZQUNBSCxJQUFBLGlCQUNBeEYsTUFBQSxXQUNBLEdBQUE4RixHQUFBSSxVQUFBM0csT0FBQSxPQUFBd0QsS0FBQW1ELFVBQUEsR0FBQUEsVUFBQSxLQUVBMUYsTUFBQTJGLE9BQUEsa0JBQUFMLEdBQUFLLE9BQUFMLEVBQUFLLE9BQUEzRixLQUFBNEYsY0FDQTVGLEtBQUE0RSxPQUFBLGtCQUFBVSxHQUFBVixPQUFBVSxFQUFBVixPQUFBNUUsS0FBQTZGLGNBQ0E3RixLQUFBa0IsS0FBQSxrQkFBQW9FLEdBQUFwRSxLQUFBb0UsRUFBQXBFLEtBQUFsQixLQUFBOEYsWUFDQTlGLEtBQUErRixVQUFBLFdBQUF4QixFQUFBZSxFQUFBUyxXQUFBVCxFQUFBUyxVQUFBM0csU0FBQTRHLFFBR0FoQixJQUFBLGNBQ0F4RixNQUFBLFNBQUE2RixHQUNBLEdBQUFZLEdBQUFqRyxJQUVBQSxNQUFBa0csVUFBQSxFQUFBNUIsRUFBQTVILFNBQUEySSxFQUFBLGlCQUFBakUsR0FDQSxNQUFBNkUsR0FBQUUsUUFBQS9FLFFBSUE0RCxJQUFBLFVBQ0F4RixNQUFBLFNBQUE0QixHQUNBLEdBQUFpRSxHQUFBakUsRUFBQWdGLGdCQUFBaEYsRUFBQWlGLGFBRUFyRyxNQUFBc0csa0JBQ0F0RyxLQUFBc0csZ0JBQUEsTUFHQXRHLEtBQUFzRyxnQkFBQSxHQUFBbEMsR0FBQTFILFNBQ0FpSixPQUFBM0YsS0FBQTJGLE9BQUFOLEdBQ0FULE9BQUE1RSxLQUFBNEUsT0FBQVMsR0FDQW5FLEtBQUFsQixLQUFBa0IsS0FBQW1FLEdBQ0FVLFVBQUEvRixLQUFBK0YsVUFDQVYsVUFDQWtCLFFBQUF2RyxVQUlBZ0YsSUFBQSxnQkFDQXhGLE1BQUEsU0FBQTZGLEdBQ0EsTUFBQXRCLG1CQUFBLFNBQUFzQixNQUdBTCxJQUFBLGdCQUNBeEYsTUFBQSxTQUFBNkYsR0FDQSxHQUFBbUIsR0FBQXpDLGtCQUFBLFNBQUFzQixFQUVBLElBQUFtQixFQUNBLE1BQUFwSCxVQUFBcUgsY0FBQUQsTUFJQXhCLElBQUEsY0FDQXhGLE1BQUEsU0FBQTZGLEdBQ0EsTUFBQXRCLG1CQUFBLE9BQUFzQixNQUdBTCxJQUFBLFVBQ0F4RixNQUFBLFdBQ0FRLEtBQUFrRyxTQUFBNUUsVUFFQXRCLEtBQUFzRyxrQkFDQXRHLEtBQUFzRyxnQkFBQWhGLFVBQ0F0QixLQUFBc0csZ0JBQUEsV0FJQXRCLElBQUEsY0FDQXhGLE1BQUEsV0FDQSxHQUFBbUcsR0FBQUQsVUFBQTNHLE9BQUEsT0FBQXdELEtBQUFtRCxVQUFBLEdBQUFBLFVBQUEsa0JBRUFnQixFQUFBLGdCQUFBZixTQUNBZ0IsSUFBQXZILFNBQUF3SCxxQkFNQSxPQUpBRixHQUFBRyxRQUFBLFNBQUFsQixHQUNBZ0IsT0FBQXZILFNBQUF3SCxzQkFBQWpCLEtBR0FnQixNQUlBeEIsV0FDS2QsRUFBQTNILFFBaUJMTixHQUFBQyxRQUFBOEksS1BvUE0yQixHQUNBLFNBQVUxSyxFQUFRQyxFQUFTQyxHUWxjakMsR0FBQTRGLEdBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUMsR0FFQUgsR0FBQS9GLEVBQUFFLEVBQUEsS0FBQTRGLEVBQUEsTUFBQUssTUFBQUgsRUFBQSxrQkFBQUYsS0FBQU0sTUFBQW5HLEVBQUE4RixHQUFBRCxLQUFBOUYsRUFBQUMsUUFBQStGLElBVUNwQyxFQUFBLFNBQUE1RCxFQUFBMkssR0FDRCxZQWdCQSxTQUFBbkUsaUJBQUFDLEVBQUFDLEdBQ0EsS0FBQUQsWUFBQUMsSUFDQSxTQUFBQyxXQUFBLHFDQWhCQSxHQUFBaUUsR0FFQSxTQUFBeEssR0FDQSxNQUFBQSxNQUFBQyxXQUFBRCxHQUNBRSxRQUFBRixJQUpBdUssR0FRQXhDLEVBQUEsa0JBQUFDLFNBQUEsZ0JBQUFBLFFBQUFDLFNBQUEsU0FBQWpJLEdBQ0EsYUFBQUEsSUFDSyxTQUFBQSxHQUNMLE1BQUFBLElBQUEsa0JBQUFnSSxTQUFBaEksRUFBQWlILGNBQUFlLFFBQUFoSSxJQUFBZ0ksT0FBQWpCLFVBQUEsZUFBQS9HLElBU0FrSSxFQUFBLFdBQ0EsUUFBQUMsa0JBQUFDLEVBQUFDLEdBQ0EsT0FBQUMsR0FBQSxFQUEyQkEsRUFBQUQsRUFBQTlGLE9BQWtCK0YsSUFBQSxDQUM3QyxHQUFBQyxHQUFBRixFQUFBQyxFQUNBQyxHQUFBckIsV0FBQXFCLEVBQUFyQixhQUFBLEVBQ0FxQixFQUFBbkIsY0FBQSxFQUNBLFNBQUFtQixPQUFBcEIsVUFBQSxHQUNBckUsT0FBQUMsZUFBQXFGLEVBQUFHLEVBQUFDLElBQUFELElBSUEsZ0JBQUFqQyxFQUFBbUMsRUFBQUMsR0FHQSxNQUZBRCxJQUFBTixpQkFBQTdCLEVBQUFTLFVBQUEwQixHQUNBQyxHQUFBUCxpQkFBQTdCLEVBQUFvQyxHQUNBcEMsTUFJQW1FLEVBQUEsV0FJQSxRQUFBQSxpQkFBQTNCLEdBQ0ExQyxnQkFBQTVDLEtBQUFpSCxpQkFFQWpILEtBQUF3RixlQUFBRixHQUNBdEYsS0FBQWtILGdCQW1LQSxNQTFKQXhDLEdBQUF1QyxrQkFDQWpDLElBQUEsaUJBQ0F4RixNQUFBLFdBQ0EsR0FBQThGLEdBQUFJLFVBQUEzRyxPQUFBLE9BQUF3RCxLQUFBbUQsVUFBQSxHQUFBQSxVQUFBLEtBRUExRixNQUFBMkYsT0FBQUwsRUFBQUssT0FDQTNGLEtBQUErRixVQUFBVCxFQUFBUyxVQUNBL0YsS0FBQXVHLFFBQUFqQixFQUFBaUIsUUFDQXZHLEtBQUE0RSxPQUFBVSxFQUFBVixPQUNBNUUsS0FBQWtCLEtBQUFvRSxFQUFBcEUsS0FDQWxCLEtBQUFxRixRQUFBQyxFQUFBRCxRQUVBckYsS0FBQW1ILGFBQUEsTUFHQW5DLElBQUEsZ0JBQ0F4RixNQUFBLFdBQ0FRLEtBQUFrQixLQUNBbEIsS0FBQW9ILGFBQ2lCcEgsS0FBQTRFLFFBQ2pCNUUsS0FBQXFILGtCQUlBckMsSUFBQSxhQUNBeEYsTUFBQSxXQUNBLEdBQUFvQixHQUFBWixLQUVBc0gsRUFBQSxPQUFBbEksU0FBQW1JLGdCQUFBcEQsYUFBQSxNQUVBbkUsTUFBQXdILGFBRUF4SCxLQUFBeUgsb0JBQUEsV0FDQSxNQUFBN0csR0FBQTRHLGNBRUF4SCxLQUFBMEgsWUFBQTFILEtBQUErRixVQUFBNEIsaUJBQUEsUUFBQTNILEtBQUF5SCx1QkFBQSxFQUVBekgsS0FBQTRILFNBQUF4SSxTQUFBeUksY0FBQSxZQUVBN0gsS0FBQTRILFNBQUFFLE1BQUFDLFNBQUEsT0FFQS9ILEtBQUE0SCxTQUFBRSxNQUFBRSxPQUFBLElBQ0FoSSxLQUFBNEgsU0FBQUUsTUFBQUcsUUFBQSxJQUNBakksS0FBQTRILFNBQUFFLE1BQUFJLE9BQUEsSUFFQWxJLEtBQUE0SCxTQUFBRSxNQUFBSyxTQUFBLFdBQ0FuSSxLQUFBNEgsU0FBQUUsTUFBQVIsRUFBQSx5QkFFQSxJQUFBYyxHQUFBekosT0FBQTBKLGFBQUFqSixTQUFBbUksZ0JBQUFlLFNBQ0F0SSxNQUFBNEgsU0FBQUUsTUFBQVMsSUFBQUgsRUFBQSxLQUVBcEksS0FBQTRILFNBQUFZLGFBQUEsZUFDQXhJLEtBQUE0SCxTQUFBcEksTUFBQVEsS0FBQWtCLEtBRUFsQixLQUFBK0YsVUFBQTBDLFlBQUF6SSxLQUFBNEgsVUFFQTVILEtBQUFtSCxjQUFBLEVBQUFILEVBQUF0SyxTQUFBc0QsS0FBQTRILFVBQ0E1SCxLQUFBMEksY0FHQTFELElBQUEsYUFDQXhGLE1BQUEsV0FDQVEsS0FBQTBILGNBQ0ExSCxLQUFBK0YsVUFBQTRDLG9CQUFBLFFBQUEzSSxLQUFBeUgscUJBQ0F6SCxLQUFBMEgsWUFBQSxLQUNBMUgsS0FBQXlILG9CQUFBLE1BR0F6SCxLQUFBNEgsV0FDQTVILEtBQUErRixVQUFBNkMsWUFBQTVJLEtBQUE0SCxVQUNBNUgsS0FBQTRILFNBQUEsU0FJQTVDLElBQUEsZUFDQXhGLE1BQUEsV0FDQVEsS0FBQW1ILGNBQUEsRUFBQUgsRUFBQXRLLFNBQUFzRCxLQUFBNEUsUUFDQTVFLEtBQUEwSSxjQUdBMUQsSUFBQSxXQUNBeEYsTUFBQSxXQUNBLEdBQUFxSixPQUFBLEVBRUEsS0FDQUEsRUFBQXpKLFNBQUEwSixZQUFBOUksS0FBQTJGLFFBQ2lCLE1BQUFvRCxHQUNqQkYsR0FBQSxFQUdBN0ksS0FBQWdKLGFBQUFILE1BR0E3RCxJQUFBLGVBQ0F4RixNQUFBLFNBQUFxSixHQUNBN0ksS0FBQXVHLFFBQUEwQyxLQUFBSixFQUFBLG1CQUNBbEQsT0FBQTNGLEtBQUEyRixPQUNBekUsS0FBQWxCLEtBQUFtSCxhQUNBOUIsUUFBQXJGLEtBQUFxRixRQUNBaEUsZUFBQXJCLEtBQUFxQixlQUFBbEIsS0FBQUgsV0FJQWdGLElBQUEsaUJBQ0F4RixNQUFBLFdBQ0FRLEtBQUFxRixTQUNBckYsS0FBQXFGLFFBQUE2RCxRQUdBdkssT0FBQXdLLGVBQUFDLHFCQUdBcEUsSUFBQSxVQUNBeEYsTUFBQSxXQUNBUSxLQUFBd0gsZ0JBR0F4QyxJQUFBLFNBQ0FxRSxJQUFBLFdBQ0EsR0FBQTFELEdBQUFELFVBQUEzRyxPQUFBLE9BQUF3RCxLQUFBbUQsVUFBQSxHQUFBQSxVQUFBLFNBSUEsSUFGQTFGLEtBQUFzSixRQUFBM0QsRUFFQSxTQUFBM0YsS0FBQXNKLFNBQUEsUUFBQXRKLEtBQUFzSixRQUNBLFNBQUFDLE9BQUEsdURBR0FDLElBQUEsV0FDQSxNQUFBeEosTUFBQXNKLFdBR0F0RSxJQUFBLFNBQ0FxRSxJQUFBLFNBQUF6RSxHQUNBLE9BQUFyQyxLQUFBcUMsRUFBQSxDQUNBLElBQUFBLEdBQUEscUJBQUFBLEVBQUEsWUFBQUwsRUFBQUssS0FBQSxJQUFBQSxFQUFBNkUsU0FXQSxTQUFBRixPQUFBLDhDQVZBLGFBQUF2SixLQUFBMkYsUUFBQWYsRUFBQVYsYUFBQSxZQUNBLFNBQUFxRixPQUFBLG9GQUdBLFlBQUF2SixLQUFBMkYsU0FBQWYsRUFBQVYsYUFBQSxhQUFBVSxFQUFBVixhQUFBLGFBQ0EsU0FBQXFGLE9BQUEseUdBR0F2SixNQUFBMEosUUFBQTlFLElBTUE0RSxJQUFBLFdBQ0EsTUFBQXhKLE1BQUEwSixZQUlBekMsa0JBR0E3SyxHQUFBQyxRQUFBNEssS1I0Y00wQyxHQUNBLFNBQVV2TixFQUFRQyxHU2hyQnhCLFFBQUF1TixRQUFBOUgsR0FDQSxHQUFBcUYsRUFFQSxlQUFBckYsRUFBQStILFNBQ0EvSCxFQUFBb0gsUUFFQS9CLEVBQUFyRixFQUFBdEMsVUFFQSxjQUFBc0MsRUFBQStILFVBQUEsYUFBQS9ILEVBQUErSCxTQUFBLENBQ0EsR0FBQUMsR0FBQWhJLEVBQUFvQyxhQUFBLFdBRUE0RixJQUNBaEksRUFBQTBHLGFBQUEsZUFHQTFHLEVBQUE4SCxTQUNBOUgsRUFBQWlJLGtCQUFBLEVBQUFqSSxFQUFBdEMsTUFBQVQsUUFFQStLLEdBQ0FoSSxFQUFBa0ksZ0JBQUEsWUFHQTdDLEVBQUFyRixFQUFBdEMsVUFFQSxDQUNBc0MsRUFBQW9DLGFBQUEsb0JBQ0FwQyxFQUFBb0gsT0FHQSxJQUFBZSxHQUFBdEwsT0FBQXdLLGVBQ0FlLEVBQUE5SyxTQUFBK0ssYUFFQUQsR0FBQUUsbUJBQUF0SSxHQUNBbUksRUFBQWIsa0JBQ0FhLEVBQUFJLFNBQUFILEdBRUEvQyxFQUFBOEMsRUFBQUssV0FHQSxNQUFBbkQsR0FHQS9LLEVBQUFDLFFBQUF1TixRVHVyQk1XLEdBQ0EsU0FBVW5PLEVBQVFDLEdVbHVCeEIsUUFBQW1PLE1BS0FBLEVBQUFqSCxXQUNBcEMsR0FBQSxTQUFBekQsRUFBQStNLEVBQUFDLEdBQ0EsR0FBQXRKLEdBQUFwQixLQUFBb0IsSUFBQXBCLEtBQUFvQixLQU9BLFFBTEFBLEVBQUExRCxLQUFBMEQsRUFBQTFELFFBQUFpTixNQUNBQyxHQUFBSCxFQUNBQyxRQUdBMUssTUFHQTZLLEtBQUEsU0FBQW5OLEVBQUErTSxFQUFBQyxHQUVBLFFBQUF4RSxZQUNBakQsRUFBQTZILElBQUFwTixFQUFBd0ksVUFDQXVFLEVBQUFqSSxNQUFBa0ksRUFBQWhGLFdBSEEsR0FBQXpDLEdBQUFqRCxJQU9BLE9BREFrRyxVQUFBNkUsRUFBQU4sRUFDQXpLLEtBQUFtQixHQUFBekQsRUFBQXdJLFNBQUF3RSxJQUdBekIsS0FBQSxTQUFBdkwsR0FDQSxHQUFBc04sTUFBQUMsTUFBQS9ILEtBQUF3QyxVQUFBLEdBQ0F3RixJQUFBbEwsS0FBQW9CLElBQUFwQixLQUFBb0IsT0FBeUMxRCxRQUFBdU4sUUFDekNuRyxFQUFBLEVBQ0FxRyxFQUFBRCxFQUFBbk0sTUFFQSxLQUFBK0YsRUFBV0EsRUFBQXFHLEVBQVNyRyxJQUNwQm9HLEVBQUFwRyxHQUFBOEYsR0FBQXBJLE1BQUEwSSxFQUFBcEcsR0FBQTRGLElBQUFNLEVBR0EsT0FBQWhMLE9BR0E4SyxJQUFBLFNBQUFwTixFQUFBK00sR0FDQSxHQUFBckosR0FBQXBCLEtBQUFvQixJQUFBcEIsS0FBQW9CLE1BQ0FnSyxFQUFBaEssRUFBQTFELEdBQ0EyTixJQUVBLElBQUFELEdBQUFYLEVBQ0EsT0FBQTNGLEdBQUEsRUFBQXFHLEVBQUFDLEVBQUFyTSxPQUF3QytGLEVBQUFxRyxFQUFTckcsSUFDakRzRyxFQUFBdEcsR0FBQThGLEtBQUFILEdBQUFXLEVBQUF0RyxHQUFBOEYsR0FBQUcsSUFBQU4sR0FDQVksRUFBQVYsS0FBQVMsRUFBQXRHLEdBWUEsT0FKQXVHLEdBQUEsT0FDQWpLLEVBQUExRCxHQUFBMk4sUUFDQWpLLEdBQUExRCxHQUVBc0MsT0FJQTVELEVBQUFDLFFBQUFtTyxHVnl1Qk1jLEdBQ0EsU0FBVWxQLEVBQVFDLEVBQVNDLEdXL3hCakMsUUFBQWlQLFFBQUEzRyxFQUFBN0csRUFBQTBNLEdBQ0EsSUFBQTdGLElBQUE3RyxJQUFBME0sRUFDQSxTQUFBbEIsT0FBQSw2QkFHQSxLQUFBaUMsRUFBQUMsT0FBQTFOLEdBQ0EsU0FBQWdGLFdBQUEsbUNBR0EsS0FBQXlJLEVBQUFaLEdBQUFILEdBQ0EsU0FBQTFILFdBQUEsb0NBR0EsSUFBQXlJLEVBQUFFLEtBQUE5RyxHQUNBLE1BQUErRyxZQUFBL0csRUFBQTdHLEVBQUEwTSxFQUVBLElBQUFlLEVBQUFJLFNBQUFoSCxHQUNBLE1BQUFpSCxnQkFBQWpILEVBQUE3RyxFQUFBME0sRUFFQSxJQUFBZSxFQUFBQyxPQUFBN0csR0FDQSxNQUFBa0gsZ0JBQUFsSCxFQUFBN0csRUFBQTBNLEVBR0EsVUFBQTFILFdBQUEsNkVBYUEsUUFBQTRJLFlBQUFELEVBQUEzTixFQUFBME0sR0FHQSxNQUZBaUIsR0FBQS9ELGlCQUFBNUosRUFBQTBNLElBR0FuSixRQUFBLFdBQ0FvSyxFQUFBL0Msb0JBQUE1SyxFQUFBME0sS0FjQSxRQUFBb0IsZ0JBQUFELEVBQUE3TixFQUFBME0sR0FLQSxNQUpBc0IsT0FBQXhJLFVBQUFzRCxRQUFBM0QsS0FBQTBJLEVBQUEsU0FBQUYsR0FDQUEsRUFBQS9ELGlCQUFBNUosRUFBQTBNLE1BSUFuSixRQUFBLFdBQ0F5SyxNQUFBeEksVUFBQXNELFFBQUEzRCxLQUFBMEksRUFBQSxTQUFBRixHQUNBQSxFQUFBL0Msb0JBQUE1SyxFQUFBME0sT0FlQSxRQUFBcUIsZ0JBQUF0RixFQUFBekksRUFBQTBNLEdBQ0EsTUFBQXVCLEdBQUE1TSxTQUFBNEcsS0FBQVEsRUFBQXpJLEVBQUEwTSxHQTNGQSxHQUFBZSxHQUFBbFAsRUFBQSxJQUNBMFAsRUFBQTFQLEVBQUEsR0E2RkFGLEdBQUFDLFFBQUFrUCxRWGt6Qk1VLEdBQ0EsU0FBVTdQLEVBQVFDLEdZMzRCeEJBLEVBQUFxUCxLQUFBLFNBQUFsTSxHQUNBLFdBQUErQyxLQUFBL0MsR0FDQUEsWUFBQTBNLGNBQ0EsSUFBQTFNLEVBQUFpSyxVQVNBcE4sRUFBQXVQLFNBQUEsU0FBQXBNLEdBQ0EsR0FBQXpCLEdBQUF1QixPQUFBaUUsVUFBQStHLFNBQUFwSCxLQUFBMUQsRUFFQSxZQUFBK0MsS0FBQS9DLElBQ0Esc0JBQUF6QixHQUFBLDRCQUFBQSxJQUNBLFVBQUF5QixLQUNBLElBQUFBLEVBQUFULFFBQUExQyxFQUFBcVAsS0FBQWxNLEVBQUEsTUFTQW5ELEVBQUFvUCxPQUFBLFNBQUFqTSxHQUNBLHNCQUFBQSxJQUNBQSxZQUFBMk0sU0FTQTlQLEVBQUF1TyxHQUFBLFNBQUFwTCxHQUdBLDRCQUZBRixPQUFBaUUsVUFBQStHLFNBQUFwSCxLQUFBMUQsS1oyNUJNNE0sR0FDQSxTQUFVaFEsRUFBUUMsRUFBU0MsR2E3N0JqQyxRQUFBK1AsV0FBQXZLLEVBQUEwRSxFQUFBekksRUFBQTBNLEVBQUE2QixHQUNBLEdBQUFDLEdBQUFyRyxTQUFBMUQsTUFBQXhDLEtBQUEwRixVQUlBLE9BRkE1RCxHQUFBNkYsaUJBQUE1SixFQUFBd08sRUFBQUQsSUFHQWhMLFFBQUEsV0FDQVEsRUFBQTZHLG9CQUFBNUssRUFBQXdPLEVBQUFELEtBZUEsUUFBQU4sVUFBQVEsRUFBQWhHLEVBQUF6SSxFQUFBME0sRUFBQTZCLEdBRUEsd0JBQUFFLEdBQUE3RSxpQkFDQTBFLFVBQUE3SixNQUFBLEtBQUFrRCxXQUlBLGtCQUFBM0gsR0FHQXNPLFVBQUFsTSxLQUFBLEtBQUFmLFVBQUFvRCxNQUFBLEtBQUFrRCxZQUlBLGdCQUFBOEcsS0FDQUEsRUFBQXBOLFNBQUFxTixpQkFBQUQsSUFJQVQsTUFBQXhJLFVBQUFtSixJQUFBeEosS0FBQXNKLEVBQUEsU0FBQTFLLEdBQ0EsTUFBQXVLLFdBQUF2SyxFQUFBMEUsRUFBQXpJLEVBQUEwTSxFQUFBNkIsTUFhQSxRQUFBcEcsVUFBQXBFLEVBQUEwRSxFQUFBekksRUFBQTBNLEdBQ0EsZ0JBQUFySixHQUNBQSxFQUFBZ0YsZUFBQXVHLEVBQUF2TCxFQUFBd0QsT0FBQTRCLEdBRUFwRixFQUFBZ0YsZ0JBQ0FxRSxFQUFBdkgsS0FBQXBCLEVBQUFWLElBeEVBLEdBQUF1TCxHQUFBclEsRUFBQSxHQTZFQUYsR0FBQUMsUUFBQTJQLFViZzlCTVksR0FDQSxTQUFVeFEsRUFBUUMsR2N4Z0N4QixRQUFBc1EsU0FBQTdLLEVBQUEwRSxHQUNBLEtBQUExRSxLQUFBMkgsV0FBQW9ELEdBQUEsQ0FDQSxxQkFBQS9LLEdBQUFnTCxTQUNBaEwsRUFBQWdMLFFBQUF0RyxHQUNBLE1BQUExRSxFQUVBQSxLQUFBaUwsWUE1QkEsR0FBQUYsR0FBQSxDQUtBLHVCQUFBRyxtQkFBQXpKLFVBQUF1SixRQUFBLENBQ0EsR0FBQUcsR0FBQUQsUUFBQXpKLFNBRUEwSixHQUFBSCxRQUFBRyxFQUFBQyxpQkFDQUQsRUFBQUUsb0JBQ0FGLEVBQUFHLG1CQUNBSCxFQUFBSSxrQkFDQUosRUFBQUssc0JBb0JBbFIsRUFBQUMsUUFBQXNRLFNkcWlDTVksR0FDQSxTQUFVblIsRUFBUUMsS0FNbEJtUixHQUNBLFNBQVVwUixFQUFRQyxFQUFTQyxHQUVqQyxZQVdBLFNBQVNDLHdCQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHZXhsQ3ZGLFFBQVNHLE1BQU1vRCxHQUNiQyxLQUFLdEMsS0FBT3FDLEVBQU9yQyxNQUFRLEdBQzNCc0MsS0FBS3lOLEtBQU8xTixFQUFPME4sTUFBUSxHQUo3QixHQUFBaE8sR0FBQW5ELEVBQUEsSWZvbENJb0QsRUFBVW5ELHVCQUF1QmtELEVBSXBCbEQsd0JldmxDakJELEVBQUEsSUFLQUksUUFBRzBELFdBQVdDLFNBQVMsV0FDckJDLFVBQVczRCxLQUNYaUQsc0JmK2xDSThOLEdBQ0EsU0FBVXRSLEVBQVFDLEdnQnhtQ3hCRCxFQUFBQyxRQUFBLGtTaEI4bUNNc1IsR0FDQSxTQUFVdlIsRUFBUUMsR2lCL21DeEJELEVBQUFDLFFBQUEiLCJmaWxlIjoibGlicy4xMC40NGFjN2I3YjFmNTJmNTc0YjI4ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIndlYnBhY2tKc29ucChbMTBdLHtcblxuLyoqKi8gMjE6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KTtcblxudmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cbnZhciBfa25vY2tvdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX2tub2Nrb3V0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tub2Nrb3V0KTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gIHZhciB2aWV3bW9kZWwgPSB7XG4gICAgY29kZTogWydcXG4gICAgICA8dGVtcGxhdGU+XFxuICAgICAgICA8eS1idXR0b24gcGFyYW1zPVwidHlwZTpcXCdnaG9zdFxcJywgY2xpY2s6JHBhcmVudC5zaG93TW9kYWxcIj5cXHU2NjNFXFx1NzkzQVxcdTVGMzlcXHU2ODQ2PC95LWJ1dHRvbj5cXG4gICAgICAgIDx5LW1vZGFsIHBhcmFtcz1cInZpc2libGU6ICRwYXJlbnQubW9kYWxWaXNpYmxlLCB3aWR0aDpcXCc3MDBweFxcJyx0aXRsZTpcXCdcXHU2NjZFXFx1OTAxQVxcdTc2ODRNb2RhbFxcdTVCRjlcXHU4QkREXFx1Njg0NlxcJyxvazogJHBhcmVudC5oYW5kbGVPa1wiPlxcbiAgICAgICAgICA8cD5cXHU2MjExXFx1OEJGNDwvcD5cXG4gICAgICAgICAgPHA+XFx1NzdFRFxcdTUzRDFcXHU3N0VEXFx1NTNEMTwvcD5cXG4gICAgICAgICAgPHA+XFx1NTlEMVxcdTVBMTg8L3A+XFxuICAgICAgICA8L3ktbW9kYWw+XFxuICAgICAgPC90ZW1wbGF0ZT5cXG4gICAgICA8c2NyaXB0PlxcbiAgICAgICAgdmFyIHZpZXdtb2RlbCA9IHtcXG4gICAgICAgICAgbW9kYWxWaXNpYmxlOiBrby5vYnNlcnZhYmxlKGZhbHNlKSxcXG4gICAgICAgICAgc2hvd01vZGFsOiAoKSA9PiB7XFxuICAgICAgICAgICAgdmlld21vZGVsLm1vZGFsVmlzaWJsZSh0cnVlKVxcbiAgICAgICAgICB9LFxcbiAgICAgICAgICBoYW5kbGVPazogZnVuY3Rpb24gKCkge1xcbiAgICAgICAgICAgIHdpbmRvdy55Y2xvdWQubm90aWNlLmluZm8oXFwnXFx1NEY2MFxcdTcwQjlcXHU1MUZCXFx1NEU4NlxcdTc4NkVcXHU1QjlBXFx1RkYwMVxcJylcXG4gICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgIDwvc2NyaXB0PlxcbiAgICAgICcsICdcXG4gICAgICA8dGVtcGxhdGU+XFxuICAgICAgICA8eS1idXR0b24gcGFyYW1zPVwidHlwZTpcXCdnaG9zdFxcJywgY2xpY2s6ZnVuY3Rpb24oKXskcGFyZW50LnNob3dNb2RhbDEoJHBhcmVudHMpfVwiPlxcdTY2M0VcXHU3OTNBXFx1NUYzOVxcdTY4NDY8L3ktYnV0dG9uPlxcbiAgICAgICAgPHktbW9kYWwgcGFyYW1zPVwidmlzaWJsZTogJHBhcmVudC5tb2RhbFZpc2libGUxLCB3aWR0aDpcXCc3MDBweFxcJyx0aXRsZTpcXCdcXHU2REZCXFx1NTJBMFxcdTY4MjFcXHU5QThDXFx1NzY4NE1vZGFsXFx1NUJGOVxcdThCRERcXHU2ODQ2XFwnLHZhbGlkYXRlRm46JHJvb3QudmFsaWRhdGVGbixlcnJvcm1zZzpcXCdcXHU4QkY3XFx1ODFGM1xcdTVDMTFcXHU5MDA5XFx1NjJFOVxcdTRFMDBcXHU2NzYxXFx1NjU3MFxcdTYzNkVcXHVGRjAxXFwnXCI+XFxuICAgICAgICAgIDx5LWdyaWQgcGFyYW1zPVwicmVmOlxcJ21vZGFsZ3JpZFxcJyxjb2x1bW5zOiAkcm9vdC5jb2x1bW5zLHJvd3M6ICRyb290LnJvd3Msb25Sb3dTZWxlY3Q6JHJvb3Qub25Sb3dTZWxlY3QsaXNTdHJpcGU6dHJ1ZVwiPjwveS1ncmlkPlxcbiAgICAgICAgPC95LW1vZGFsPlxcbiAgICAgIDwvdGVtcGxhdGU+XFxuICAgICAgPHNjcmlwdD5cXG4gICAgICAgIHZhciB2aWV3bW9kZWwgPSB7XFxuICAgICAgICAgIG1vZGFsVmlzaWJsZTE6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxcbiAgICAgICAgICBzaG93TW9kYWwxOiAodmFsKSA9PiB7XFxuICAgICAgICAgICAgdmlld21vZGVsLm1vZGFsVmlzaWJsZTEodHJ1ZSlcXG4gICAgICAgICAgfSxcXG4gICAgICAgICAgcm93czoga28ub2JzZXJ2YWJsZUFycmF5KFtcXG4gICAgICAgICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMSksIG5hbWU6IGtvLm9ic2VydmFibGUoXFwnXFx1Njc0RVxcdTY2MEVcXCcpfSxcXG4gICAgICAgICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMiksIG5hbWU6IGtvLm9ic2VydmFibGUoXFwnXFx1OTdFOVxcdTY4ODVcXHU2ODg1XFwnKX0sXFxuICAgICAgICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDMpLCBuYW1lOiBrby5vYnNlcnZhYmxlKFxcJ1xcdTRFMzlcXHU1QzNDXFwnKX1cXG4gICAgICAgICAgXSksXFxuICAgICAgICAgIGNvbHVtbnM6IGtvLm9ic2VydmFibGVBcnJheShbXFxuICAgICAgICAgICAge1xcbiAgICAgICAgICAgICAgdGl0bGU6IFxcJ1xcJyxcXG4gICAgICAgICAgICAgIGZpZWxkOiBcXCdpZFxcJyxcXG4gICAgICAgICAgICAgIHR5cGU6IFxcJ2NoZWNrYm94XFwnLFxcbiAgICAgICAgICAgICAgaGlkZGVuOiBmYWxzZSxcXG4gICAgICAgICAgICAgIHdpZHRoOiA1MFxcbiAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAge1xcbiAgICAgICAgICAgICAgdGl0bGU6IFxcJ25hbWVcXCcsXFxuICAgICAgICAgICAgICBmaWVsZDogXFwnbmFtZVxcJyxcXG4gICAgICAgICAgICAgIHdpZHRoOiBcXCcyMCVcXCdcXG4gICAgICAgICAgICB9LFxcbiAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgIGZpZWxkOiBcXCdpZFxcJyxcXG4gICAgICAgICAgICAgIHRpdGxlOiBcXCdyZW5kZXJGblxcJyxcXG4gICAgICAgICAgICAgIHR5cGU6IFxcJ3JlbmRlclxcJyxcXG4gICAgICAgICAgICAgIGhpZGRlbjogZmFsc2UsXFxuICAgICAgICAgICAgICByZW5kZXJGbjogZnVuY3Rpb24gKHJvdywgaW5kZXgpIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcJzxzcGFuPlxcdTkwMUFcXHU4RkM3cmVuZGVyXFx1NTFGRFxcdTY1NzBcXHU3NTFGXFx1NjIxMFxcdTc2ODRodG1sXFx1NzI0N1xcdTZCQjU8c3Bhbj5cXCdcXG4gICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICBmaWVsZDogXFwnaWRcXCcsXFxuICAgICAgICAgICAgICB0aXRsZTogXFwnb3BlcmF0aW9uXFwnLFxcbiAgICAgICAgICAgICAgaGlkZGVuOiBmYWxzZSxcXG4gICAgICAgICAgICAgIHR5cGU6IFxcJ29wZXJhdGlvblxcJyxcXG4gICAgICAgICAgICAgIHdpZHRoOiBcXCcyMCVcXCcsXFxuICAgICAgICAgICAgICBvcGVyYXRpb25MaXN0OiBbXFxuICAgICAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgICAgICB0aXRsZTogXFwnXFx1NjRDRFxcdTRGNUMxXFwnLFxcbiAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAocm93LCBldnQpIHtcXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFxcJ1xcdTY0Q0RcXHU0RjVDMVxcJylcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgIF1cXG4gICAgICAgICAgICB9XFxuICAgICAgICAgIF0pLFxcbiAgICAgICAgICBvblJvd1NlbGVjdDogZnVuY3Rpb24gKHJvdykge30sXFxuICAgICAgICAgIHZhbGlkYXRlRm46IGZ1bmN0aW9uICgpIHtcXG4gICAgICAgICAgICBsZXQgZ3JpZCA9IHdpbmRvdy55Y2xvdWQuJHJlZnNbXFwnbW9kYWxncmlkXFwnXVxcbiAgICAgICAgICAgIGlmIChncmlkLmdldFNlbGVjdGVkUm93cygpLmxlbmd0aCA+IDApIHtcXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlXFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgfVxcbiAgICAgICAgfSBcXG4gICAgICA8L3NjcmlwdD5cXG4gICAgICAnLCAnXFxuICAgICAgPHRlbXBsYXRlPlxcbiAgICAgICAgPHktYnV0dG9uIHBhcmFtcz1cInR5cGU6XFwnZ2hvc3RcXCcsIGNsaWNrOiRwYXJlbnQuc2hvd01vZGFsMlwiPlxcdTY2M0VcXHU3OTNBXFx1NUYzOVxcdTY4NDY8L3ktYnV0dG9uPlxcbiAgICAgICAgPHktbW9kYWwgcGFyYW1zPVwidmlzaWJsZTogJHBhcmVudC5tb2RhbFZpc2libGUyLCB3aWR0aDpcXCc3MDBweFxcJyx0aXRsZTpcXCdcXHU4MUVBXFx1NTJBOFxcdTkwMDJcXHU5MTREXFx1OUFEOFxcdTVFQTZcXHU3Njg0TW9kYWxcXHU1QkY5XFx1OEJERFxcdTY4NDZcXCdcIj5cXG4gICAgICAgICAgPHNwYW4+XFx1NzY3RVxcdTVCQjZcXHU1OUQzOiA8L3NwYW4+XFxuICAgICAgICAgIDx5LWdyaWQgcGFyYW1zPVwibW9kYWxCb2R5TW9kYWxIZWlnaHQ6Ym9keU1heEhlaWdodCxtb2RhbEJvZHlFeHRyYUhlaWdodDpcXCcyMHB4XFwnLG9uUm93U2VsZWN0OiRyb290Lm9uUm93U2VsZWN0LGNvbHVtbnM6ICRyb290LmNvbHVtbnMscm93czogJHJvb3Qucm93czIsbG9ja2hlYWQ6dHJ1ZVwiPjwveS1ncmlkPlxcbiAgICAgICAgPC95LW1vZGFsPlxcbiAgICAgIDwvdGVtcGxhdGU+XFxuICAgICAgPHNjcmlwdD5cXG4gICAgICAgIHZhciB2aWV3bW9kZWwgPSB7XFxuICAgICAgICAgIG1vZGFsVmlzaWJsZTI6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxcbiAgICAgICAgICBzaG93TW9kYWwyOiAodmFsKSA9PiB7XFxuICAgICAgICAgICAgdmlld21vZGVsLm1vZGFsVmlzaWJsZTIodHJ1ZSlcXG4gICAgICAgICAgfSxcXG4gICAgICAgICAgcm93czI6IGtvLm9ic2VydmFibGVBcnJheShbXFxuICAgICAgICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDEpLCBuYW1lOiBrby5vYnNlcnZhYmxlKFxcJ1xcdThENzVcXCcpfSxcXG4gICAgICAgICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMiksIG5hbWU6IGtvLm9ic2VydmFibGUoXFwnXFx1OTRCMVxcJyl9LFxcbiAgICAgICAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgzKSwgbmFtZToga28ub2JzZXJ2YWJsZShcXCdcXHU1QjU5XFwnKX0sXFxuICAgICAgICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDEpLCBuYW1lOiBrby5vYnNlcnZhYmxlKFxcJ1xcdTY3NEVcXCcpfSxcXG4gICAgICAgICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMiksIG5hbWU6IGtvLm9ic2VydmFibGUoXFwnXFx1NTQ2OFxcJyl9LFxcbiAgICAgICAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgzKSwgbmFtZToga28ub2JzZXJ2YWJsZShcXCdcXHU1NDM0XFwnKX0sXFxuICAgICAgICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDEpLCBuYW1lOiBrby5vYnNlcnZhYmxlKFxcJ1xcdTkwRDFcXCcpfSxcXG4gICAgICAgICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMiksIG5hbWU6IGtvLm9ic2VydmFibGUoXFwnXFx1NzM4QlxcJyl9LFxcbiAgICAgICAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgzKSwgbmFtZToga28ub2JzZXJ2YWJsZShcXCdcXHU1MUFGXFwnKX0sXFxuICAgICAgICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDMpLCBuYW1lOiBrby5vYnNlcnZhYmxlKFxcJ1xcdTk2NDhcXCcpfSxcXG4gICAgICAgICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMyksIG5hbWU6IGtvLm9ic2VydmFibGUoXFwnXFx1ODkxQVxcJyl9LFxcbiAgICAgICAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgzKSwgbmFtZToga28ub2JzZXJ2YWJsZShcXCdcXHU1MzZCXFwnKX1cXG4gICAgICAgICAgXSksXFxuICAgICAgICAgIGNvbHVtbnM6IGtvLm9ic2VydmFibGVBcnJheShbXFxuICAgICAgICAgICAge1xcbiAgICAgICAgICAgICAgdGl0bGU6IFxcJ1xcJyxcXG4gICAgICAgICAgICAgIGZpZWxkOiBcXCdpZFxcJyxcXG4gICAgICAgICAgICAgIHR5cGU6IFxcJ2NoZWNrYm94XFwnLFxcbiAgICAgICAgICAgICAgaGlkZGVuOiBmYWxzZSxcXG4gICAgICAgICAgICAgIHdpZHRoOiA1MFxcbiAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAge1xcbiAgICAgICAgICAgICAgdGl0bGU6IFxcJ25hbWVcXCcsXFxuICAgICAgICAgICAgICBmaWVsZDogXFwnbmFtZVxcJyxcXG4gICAgICAgICAgICAgIHdpZHRoOiBcXCcyMCVcXCdcXG4gICAgICAgICAgICB9LFxcbiAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgIGZpZWxkOiBcXCdpZFxcJyxcXG4gICAgICAgICAgICAgIHRpdGxlOiBcXCdyZW5kZXJGblxcJyxcXG4gICAgICAgICAgICAgIHR5cGU6IFxcJ3JlbmRlclxcJyxcXG4gICAgICAgICAgICAgIGhpZGRlbjogZmFsc2UsXFxuICAgICAgICAgICAgICByZW5kZXJGbjogZnVuY3Rpb24gKHJvdywgaW5kZXgpIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcJzxzcGFuPlxcdTkwMUFcXHU4RkM3cmVuZGVyXFx1NTFGRFxcdTY1NzBcXHU3NTFGXFx1NjIxMFxcdTc2ODRodG1sXFx1NzI0N1xcdTZCQjU8c3Bhbj5cXCdcXG4gICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICBmaWVsZDogXFwnaWRcXCcsXFxuICAgICAgICAgICAgICB0aXRsZTogXFwnb3BlcmF0aW9uXFwnLFxcbiAgICAgICAgICAgICAgaGlkZGVuOiBmYWxzZSxcXG4gICAgICAgICAgICAgIHR5cGU6IFxcJ29wZXJhdGlvblxcJyxcXG4gICAgICAgICAgICAgIHdpZHRoOiBcXCcyMCVcXCcsXFxuICAgICAgICAgICAgICBvcGVyYXRpb25MaXN0OiBbXFxuICAgICAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgICAgICB0aXRsZTogXFwnXFx1NjRDRFxcdTRGNUNcXCcsXFxuICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChyb3csIGV2dCkge1xcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXFwnXFx1NjRDRFxcdTRGNUNcXCcpXFxuICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICBdXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICBdKVxcbiAgICAgICAgfVxcbiAgICAgIDwvc2NyaXB0PlxcbiAgICAgICddLFxuICAgIC8vIOWfuuacrFxuICAgIG1vZGFsVmlzaWJsZTogX2tub2Nrb3V0Mi5kZWZhdWx0Lm9ic2VydmFibGUoZmFsc2UpLFxuICAgIHNob3dNb2RhbDogZnVuY3Rpb24gc2hvd01vZGFsKHZhbCkge1xuICAgICAgdmlld21vZGVsLm1vZGFsVmlzaWJsZSh0cnVlKTtcbiAgICB9LFxuICAgIC8vIOagoemqjFxuICAgIG1vZGFsVmlzaWJsZTE6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKGZhbHNlKSxcbiAgICBzaG93TW9kYWwxOiBmdW5jdGlvbiBzaG93TW9kYWwxKHZhbCkge1xuICAgICAgdmlld21vZGVsLm1vZGFsVmlzaWJsZTEodHJ1ZSk7XG4gICAgfSxcbiAgICAvLyBtb2RlbOacgOWkp+mrmOW6plxuICAgIG1vZGFsVmlzaWJsZTI6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKGZhbHNlKSxcbiAgICBzaG93TW9kYWwyOiBmdW5jdGlvbiBzaG93TW9kYWwyKHZhbCkge1xuICAgICAgdmlld21vZGVsLm1vZGFsVmlzaWJsZTIodHJ1ZSk7XG4gICAgfSxcbiAgICByb3dzOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZUFycmF5KFt7IGlkOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZSgxKSwgbmFtZTogX2tub2Nrb3V0Mi5kZWZhdWx0Lm9ic2VydmFibGUoJ+adjuaYjicpIH0sIHsgaWQ6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKDIpLCBuYW1lOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZSgn6Z+p5qKF5qKFJykgfSwgeyBpZDogX2tub2Nrb3V0Mi5kZWZhdWx0Lm9ic2VydmFibGUoMyksIG5hbWU6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKCfkuLnlsLwnKSB9XSksXG4gICAgcm93czI6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlQXJyYXkoW3sgaWQ6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKDEpLCBuYW1lOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZSgn6LW1JykgfSwgeyBpZDogX2tub2Nrb3V0Mi5kZWZhdWx0Lm9ic2VydmFibGUoMiksIG5hbWU6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKCfpkrEnKSB9LCB7IGlkOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZSgzKSwgbmFtZTogX2tub2Nrb3V0Mi5kZWZhdWx0Lm9ic2VydmFibGUoJ+WtmScpIH0sIHsgaWQ6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKDEpLCBuYW1lOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZSgn5p2OJykgfSwgeyBpZDogX2tub2Nrb3V0Mi5kZWZhdWx0Lm9ic2VydmFibGUoMiksIG5hbWU6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKCflkagnKSB9LCB7IGlkOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZSgzKSwgbmFtZTogX2tub2Nrb3V0Mi5kZWZhdWx0Lm9ic2VydmFibGUoJ+WQtCcpIH0sIHsgaWQ6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKDEpLCBuYW1lOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZSgn6YORJykgfSwgeyBpZDogX2tub2Nrb3V0Mi5kZWZhdWx0Lm9ic2VydmFibGUoMiksIG5hbWU6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKCfnjosnKSB9LCB7IGlkOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZSgzKSwgbmFtZTogX2tub2Nrb3V0Mi5kZWZhdWx0Lm9ic2VydmFibGUoJ+WGrycpIH0sIHsgaWQ6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKDMpLCBuYW1lOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZSgn6ZmIJykgfSwgeyBpZDogX2tub2Nrb3V0Mi5kZWZhdWx0Lm9ic2VydmFibGUoMyksIG5hbWU6IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKCfopJonKSB9LCB7IGlkOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZSgzKSwgbmFtZTogX2tub2Nrb3V0Mi5kZWZhdWx0Lm9ic2VydmFibGUoJ+WNqycpIH1dKSxcbiAgICBjb2x1bW5zOiBfa25vY2tvdXQyLmRlZmF1bHQub2JzZXJ2YWJsZUFycmF5KFt7XG4gICAgICB0aXRsZTogJycsXG4gICAgICBmaWVsZDogJ2lkJyxcbiAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICBoaWRkZW46IGZhbHNlLFxuICAgICAgd2lkdGg6IDUwXG4gICAgfSwge1xuICAgICAgdGl0bGU6ICduYW1lJyxcbiAgICAgIGZpZWxkOiAnbmFtZScsXG4gICAgICB3aWR0aDogJzIwJSdcbiAgICB9LCB7XG4gICAgICBmaWVsZDogJ2lkJyxcbiAgICAgIHRpdGxlOiAncmVuZGVyRm4nLFxuICAgICAgdHlwZTogJ3JlbmRlcicsXG4gICAgICBoaWRkZW46IGZhbHNlLFxuICAgICAgcmVuZGVyRm46IGZ1bmN0aW9uIHJlbmRlckZuKHJvdywgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuICc8c3Bhbj7pgJrov4dyZW5kZXLlh73mlbDnlJ/miJDnmoRodG1s54mH5q61PHNwYW4+JztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBmaWVsZDogJ2lkJyxcbiAgICAgIHRpdGxlOiAnb3BlcmF0aW9uJyxcbiAgICAgIGhpZGRlbjogZmFsc2UsXG4gICAgICB0eXBlOiAnb3BlcmF0aW9uJyxcbiAgICAgIHdpZHRoOiAnMjAlJyxcbiAgICAgIG9wZXJhdGlvbkxpc3Q6IFt7XG4gICAgICAgIHRpdGxlOiAn5pON5L2cJyxcbiAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKHJvdywgZXZ0KSB7XG4gICAgICAgICAgYWxlcnQoJ+aTjeS9nCcpO1xuICAgICAgICB9XG4gICAgICB9XVxuICAgIH1dKSxcbiAgICBvblJvd1NlbGVjdDogZnVuY3Rpb24gb25Sb3dTZWxlY3Qocm93KSB7fSxcbiAgICB2YWxpZGF0ZUZuOiBmdW5jdGlvbiB2YWxpZGF0ZUZuKCkge1xuICAgICAgdmFyIGdyaWQgPSB3aW5kb3cueWNsb3VkLiRyZWZzWydtb2RhbGdyaWQnXTtcbiAgICAgIGlmIChncmlkLmdldFNlbGVjdGVkUm93cygpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcbiAgICBoYW5kbGVPazogZnVuY3Rpb24gaGFuZGxlT2soKSB7XG4gICAgICB3aW5kb3cueWNsb3VkLm5vdGljZS5pbmZvKCfkvaDngrnlh7vkuobnoa7lrprvvIEnKTtcbiAgICB9XG4gIH07XG4gIF9rbm9ja291dDIuZGVmYXVsdC5hcHBseUJpbmRpbmdzKHZpZXdtb2RlbCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpKTtcbn1cbmV4cG9ydHMuZGVmYXVsdCA9IHtcbiAgdGVtcGxhdGU6IF9pbmRleDIuZGVmYXVsdCxcbiAgaW5pdDogaW5pdFxufTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDQxOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyA0Mjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpO1xuXG52YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXyg0NCk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXG52YXIgX2tub2Nrb3V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9rbm9ja291dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rbm9ja291dCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGluaXQocGFyYW1zKSB7XG4gIHRoaXMuY29kZSA9IHBhcmFtcy5jb2RlO1xuICB0aGlzLmlzU2hvd0FsbCA9IF9rbm9ja291dDIuZGVmYXVsdC5vYnNlcnZhYmxlKGZhbHNlKTtcbiAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5pc1Nob3dBbGwoIXRoaXMuaXNTaG93QWxsKCkpO1xuICB9LmJpbmQodGhpcyk7XG59XG5fa25vY2tvdXQyLmRlZmF1bHQuY29tcG9uZW50cy5yZWdpc3RlcignZGVtbycsIHtcbiAgdmlld01vZGVsOiBpbml0LFxuICB0ZW1wbGF0ZTogX2luZGV4Mi5kZWZhdWx0XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDQzOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiZGVtb1xcXCI+XFxyXFxuICA8ZGl2IGNsYXNzPVxcXCJkZW1vLXNob3dcXFwiPlxcclxcbiAgPCEtLSBrbyB0ZW1wbGF0ZTogeyBub2RlczogJGNvbXBvbmVudFRlbXBsYXRlTm9kZXMgfSAtLT48IS0tIC9rbyAtLT5cXHJcXG4gIDwvZGl2PlxcclxcbiAgPGRpdiBjbGFzcz1cXFwiZGVtby1zcGxpdFxcXCI+PC9kaXY+XFxyXFxuICA8ZGl2IGNsYXNzPVxcXCJkZW1vLWNvZGVcXFwiIGRhdGEtYmluZD1cXFwiY3NzOnsnZGVtby1oaWRlQ29kZSc6IWlzU2hvd0FsbCgpfVxcXCI+XFxyXFxuICAgIDx5LWNvZGUgcGFyYW1zPVxcXCJjb2RlOmNvZGVcXFwiPjwveS1jb2RlPlxcclxcbiAgPC9kaXY+XFxyXFxuICA8ZGl2IGNsYXNzPVxcXCJkZW1vLXRvZ2dsZVxcXCIgZGF0YS1iaW5kPVxcXCJjbGljazp0b2dnbGVcXFwiPjxzcGFuIGNsYXNzPVxcXCJmYVxcXCIgZGF0YS1iaW5kPVxcXCJjc3M6eydmYS1hbmdsZS1kb3VibGUtZG93bic6IWlzU2hvd0FsbCgpLCdmYS1hbmdsZS1kb3VibGUtdXAnOmlzU2hvd0FsbCgpfVxcXCI+PC9zcGFuPjwvZGl2PlxcclxcbjwvZGl2PlxcclxcblwiO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gNDQ6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuXG4vKioqLyA0NTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpO1xuXG52YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7XG5cbnZhciBfa25vY2tvdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX2tub2Nrb3V0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tub2Nrb3V0KTtcblxudmFyIF9oaWdobGlnaHRqcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfaGlnaGxpZ2h0anMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaGlnaGxpZ2h0anMpO1xuXG52YXIgX2NsaXBib2FyZCA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXG52YXIgX2NsaXBib2FyZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGlwYm9hcmQpO1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDU2KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLy8gaW1wb3J0IHsgZGVidWcgfSBmcm9tICd1dGlsJ1xuZnVuY3Rpb24gSW5pdChwYXJhbXMsIGVsKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgLy8g5Y+q6I635Y+W6auY5Lqu55qERE9N77yM5ZCm5YiZ5Lya5b2x5ZONa2/mjIfku6RcbiAgdGhpcy4kZWwgPSBlbC5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbM107XG4gIHRoaXMuY29kZSA9IHBhcmFtcy5jb2RlO1xuICB0aGlzLmNvcHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNsaXBib2FyZCA9IG5ldyBfY2xpcGJvYXJkMi5kZWZhdWx0KCcuY29weScsIHtcbiAgICAgIHRleHQ6IGZ1bmN0aW9uIHRleHQoKSB7XG4gICAgICAgIHJldHVybiBwYXJhbXMuY29kZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjbGlwYm9hcmQub24oJ3N1Y2Nlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgY2xpcGJvYXJkLmRlc3Ryb3koKTtcbiAgICAgIHdpbmRvdy5hbGVydCgn5Luj56CB5bey5aSN5Yi25Yiw5Ymq6LS05p2/Jyk7XG4gICAgfSk7XG4gIH07XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIF9oaWdobGlnaHRqczIuZGVmYXVsdC5oaWdobGlnaHRCbG9jayhfdGhpcy4kZWwpO1xuICB9KTtcbn1cbl9rbm9ja291dDIuZGVmYXVsdC5jb21wb25lbnRzLnJlZ2lzdGVyKCd5LWNvZGUnLCB7XG4gIHZpZXdNb2RlbDoge1xuICAgIGNyZWF0ZVZpZXdNb2RlbDogZnVuY3Rpb24gY3JlYXRlVmlld01vZGVsKHBhcmFtcywgY29tcG9uZW50SW5mbykge1xuICAgICAgcmV0dXJuIG5ldyBJbml0KHBhcmFtcywgY29tcG9uZW50SW5mby5lbGVtZW50KTtcbiAgICB9XG4gIH0sXG4gIHRlbXBsYXRlOiBfaW5kZXgyLmRlZmF1bHRcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gNDY6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjb2RlXFxcIj5cXHJcXG4gIDxkaXYgY2xhc3M9XFxcInRvb2xzXFxcIj5cXHJcXG4gICAgPGkgY2xhc3M9XFxcImZhIGZhLWNsaXBib2FyZCBjb3B5XFxcIiBkYXRhLWJpbmQ9XFxcImNsaWNrOiBjb3B5XFxcIj48L2k+XFxyXFxuICA8L2Rpdj5cXHJcXG4gIDxwcmU+PGNvZGUgY2xhc3M9XFxcImh0bWxcXFwiIGRhdGEtYmluZD1cXFwidGV4dDogY29kZVxcXCI+PC9jb2RlPjwvcHJlPlxcclxcbjwvZGl2PlxcclxcblwiO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gNDc6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuXG4vKioqLyA0ODpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICBpZiAodHJ1ZSkge1xuICAgICAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18gPSBbbW9kdWxlLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg1MSksIF9fd2VicGFja19yZXF1aXJlX18oNTIpXSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID0gKGZhY3RvcnkpLFxuXHRcdFx0XHRfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9ICh0eXBlb2YgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fID09PSAnZnVuY3Rpb24nID9cblx0XHRcdFx0KF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXy5hcHBseShleHBvcnRzLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fKSkgOiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18pLFxuXHRcdFx0XHRfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBmYWN0b3J5KG1vZHVsZSwgcmVxdWlyZSgnLi9jbGlwYm9hcmQtYWN0aW9uJyksIHJlcXVpcmUoJ3RpbnktZW1pdHRlcicpLCByZXF1aXJlKCdnb29kLWxpc3RlbmVyJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtb2QgPSB7XG4gICAgICAgICAgICBleHBvcnRzOiB7fVxuICAgICAgICB9O1xuICAgICAgICBmYWN0b3J5KG1vZCwgZ2xvYmFsLmNsaXBib2FyZEFjdGlvbiwgZ2xvYmFsLnRpbnlFbWl0dGVyLCBnbG9iYWwuZ29vZExpc3RlbmVyKTtcbiAgICAgICAgZ2xvYmFsLmNsaXBib2FyZCA9IG1vZC5leHBvcnRzO1xuICAgIH1cbn0pKHRoaXMsIGZ1bmN0aW9uIChtb2R1bGUsIF9jbGlwYm9hcmRBY3Rpb24sIF90aW55RW1pdHRlciwgX2dvb2RMaXN0ZW5lcikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBfY2xpcGJvYXJkQWN0aW9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsaXBib2FyZEFjdGlvbik7XG5cbiAgICB2YXIgX3RpbnlFbWl0dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RpbnlFbWl0dGVyKTtcblxuICAgIHZhciBfZ29vZExpc3RlbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dvb2RMaXN0ZW5lcik7XG5cbiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgICAgICAgICAgZGVmYXVsdDogb2JqXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmo7XG4gICAgfSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgICAgICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgICAgICAgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICAgICAgICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgICAgICAgICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICAgICAgICB9O1xuICAgIH0oKTtcblxuICAgIGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcbiAgICAgICAgaWYgKCFzZWxmKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuICAgIH1cblxuICAgIHZhciBDbGlwYm9hcmQgPSBmdW5jdGlvbiAoX0VtaXR0ZXIpIHtcbiAgICAgICAgX2luaGVyaXRzKENsaXBib2FyZCwgX0VtaXR0ZXIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ3xIVE1MRWxlbWVudHxIVE1MQ29sbGVjdGlvbnxOb2RlTGlzdH0gdHJpZ2dlclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gQ2xpcGJvYXJkKHRyaWdnZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbGlwYm9hcmQpO1xuXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2xpcGJvYXJkLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2xpcGJvYXJkKSkuY2FsbCh0aGlzKSk7XG5cbiAgICAgICAgICAgIF90aGlzLnJlc29sdmVPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgX3RoaXMubGlzdGVuQ2xpY2sodHJpZ2dlcik7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBpZiBhdHRyaWJ1dGVzIHdvdWxkIGJlIHJlc29sdmVkIHVzaW5nIGludGVybmFsIHNldHRlciBmdW5jdGlvbnNcbiAgICAgICAgICogb3IgY3VzdG9tIGZ1bmN0aW9ucyB0aGF0IHdlcmUgcGFzc2VkIGluIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgICAgICovXG5cblxuICAgICAgICBfY3JlYXRlQ2xhc3MoQ2xpcGJvYXJkLCBbe1xuICAgICAgICAgICAga2V5OiAncmVzb2x2ZU9wdGlvbnMnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc29sdmVPcHRpb25zKCkge1xuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gdHlwZW9mIG9wdGlvbnMuYWN0aW9uID09PSAnZnVuY3Rpb24nID8gb3B0aW9ucy5hY3Rpb24gOiB0aGlzLmRlZmF1bHRBY3Rpb247XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0eXBlb2Ygb3B0aW9ucy50YXJnZXQgPT09ICdmdW5jdGlvbicgPyBvcHRpb25zLnRhcmdldCA6IHRoaXMuZGVmYXVsdFRhcmdldDtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHQgPSB0eXBlb2Ygb3B0aW9ucy50ZXh0ID09PSAnZnVuY3Rpb24nID8gb3B0aW9ucy50ZXh0IDogdGhpcy5kZWZhdWx0VGV4dDtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IF90eXBlb2Yob3B0aW9ucy5jb250YWluZXIpID09PSAnb2JqZWN0JyA/IG9wdGlvbnMuY29udGFpbmVyIDogZG9jdW1lbnQuYm9keTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnbGlzdGVuQ2xpY2snLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxpc3RlbkNsaWNrKHRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXIgPSAoMCwgX2dvb2RMaXN0ZW5lcjIuZGVmYXVsdCkodHJpZ2dlciwgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5vbkNsaWNrKGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdvbkNsaWNrJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHJpZ2dlciA9IGUuZGVsZWdhdGVUYXJnZXQgfHwgZS5jdXJyZW50VGFyZ2V0O1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpcGJvYXJkQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpcGJvYXJkQWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNsaXBib2FyZEFjdGlvbiA9IG5ldyBfY2xpcGJvYXJkQWN0aW9uMi5kZWZhdWx0KHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiB0aGlzLmFjdGlvbih0cmlnZ2VyKSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLnRhcmdldCh0cmlnZ2VyKSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy50ZXh0KHRyaWdnZXIpLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuY29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiB0cmlnZ2VyLFxuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyOiB0aGlzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2RlZmF1bHRBY3Rpb24nLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlZmF1bHRBY3Rpb24odHJpZ2dlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRBdHRyaWJ1dGVWYWx1ZSgnYWN0aW9uJywgdHJpZ2dlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2RlZmF1bHRUYXJnZXQnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlZmF1bHRUYXJnZXQodHJpZ2dlcikge1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IGdldEF0dHJpYnV0ZVZhbHVlKCd0YXJnZXQnLCB0cmlnZ2VyKTtcblxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdkZWZhdWx0VGV4dCcsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVmYXVsdFRleHQodHJpZ2dlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRBdHRyaWJ1dGVWYWx1ZSgndGV4dCcsIHRyaWdnZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdkZXN0cm95JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXIuZGVzdHJveSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpcGJvYXJkQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpcGJvYXJkQWN0aW9uLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGlwYm9hcmRBY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfV0sIFt7XG4gICAgICAgICAgICBrZXk6ICdpc1N1cHBvcnRlZCcsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogWydjb3B5JywgJ2N1dCddO1xuXG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvbnMgPSB0eXBlb2YgYWN0aW9uID09PSAnc3RyaW5nJyA/IFthY3Rpb25dIDogYWN0aW9uO1xuICAgICAgICAgICAgICAgIHZhciBzdXBwb3J0ID0gISFkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQ7XG5cbiAgICAgICAgICAgICAgICBhY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ID0gc3VwcG9ydCAmJiAhIWRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZChhY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1dKTtcblxuICAgICAgICByZXR1cm4gQ2xpcGJvYXJkO1xuICAgIH0oX3RpbnlFbWl0dGVyMi5kZWZhdWx0KTtcblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byByZXRyaWV2ZSBhdHRyaWJ1dGUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN1ZmZpeFxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEF0dHJpYnV0ZVZhbHVlKHN1ZmZpeCwgZWxlbWVudCkge1xuICAgICAgICB2YXIgYXR0cmlidXRlID0gJ2RhdGEtY2xpcGJvYXJkLScgKyBzdWZmaXg7XG5cbiAgICAgICAgaWYgKCFlbGVtZW50Lmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICB9XG5cbiAgICBtb2R1bGUuZXhwb3J0cyA9IENsaXBib2FyZDtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gNDk6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18sIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fOyhmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgaWYgKHRydWUpIHtcbiAgICAgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fID0gW21vZHVsZSwgX193ZWJwYWNrX3JlcXVpcmVfXyg1MCldLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPSAoZmFjdG9yeSksXG5cdFx0XHRcdF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gKHR5cGVvZiBfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18gPT09ICdmdW5jdGlvbicgP1xuXHRcdFx0XHQoX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pKSA6IF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyksXG5cdFx0XHRcdF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGZhY3RvcnkobW9kdWxlLCByZXF1aXJlKCdzZWxlY3QnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG1vZCA9IHtcbiAgICAgICAgICAgIGV4cG9ydHM6IHt9XG4gICAgICAgIH07XG4gICAgICAgIGZhY3RvcnkobW9kLCBnbG9iYWwuc2VsZWN0KTtcbiAgICAgICAgZ2xvYmFsLmNsaXBib2FyZEFjdGlvbiA9IG1vZC5leHBvcnRzO1xuICAgIH1cbn0pKHRoaXMsIGZ1bmN0aW9uIChtb2R1bGUsIF9zZWxlY3QpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgX3NlbGVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWxlY3QpO1xuXG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG9ialxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICAgIH0gOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gICAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICAgICAgICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgICAgICAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICAgICAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICB2YXIgQ2xpcGJvYXJkQWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIENsaXBib2FyZEFjdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2xpcGJvYXJkQWN0aW9uKTtcblxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFNlbGVjdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgYmFzZSBwcm9wZXJ0aWVzIHBhc3NlZCBmcm9tIGNvbnN0cnVjdG9yLlxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAgICAgKi9cblxuXG4gICAgICAgIF9jcmVhdGVDbGFzcyhDbGlwYm9hcmRBY3Rpb24sIFt7XG4gICAgICAgICAgICBrZXk6ICdyZXNvbHZlT3B0aW9ucycsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZU9wdGlvbnMoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSBvcHRpb25zLmFjdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlciA9IG9wdGlvbnMuZW1pdHRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldCA9IG9wdGlvbnMudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dCA9IG9wdGlvbnMudGV4dDtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIgPSBvcHRpb25zLnRyaWdnZXI7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGV4dCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdpbml0U2VsZWN0aW9uJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0U2VsZWN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RGYWtlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnc2VsZWN0RmFrZScsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0RmFrZSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgdmFyIGlzUlRMID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGlyJykgPT0gJ3J0bCc7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZha2UoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZUZha2UoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUhhbmRsZXIgPSB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjaykgfHwgdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgem9vbWluZyBvbiBpT1NcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtLnN0eWxlLmZvbnRTaXplID0gJzEycHQnO1xuICAgICAgICAgICAgICAgIC8vIFJlc2V0IGJveCBtb2RlbFxuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUVsZW0uc3R5bGUuYm9yZGVyID0gJzAnO1xuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUVsZW0uc3R5bGUucGFkZGluZyA9ICcwJztcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtLnN0eWxlLm1hcmdpbiA9ICcwJztcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIGVsZW1lbnQgb3V0IG9mIHNjcmVlbiBob3Jpem9udGFsbHlcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtLnN0eWxlW2lzUlRMID8gJ3JpZ2h0JyA6ICdsZWZ0J10gPSAnLTk5OTlweCc7XG4gICAgICAgICAgICAgICAgLy8gTW92ZSBlbGVtZW50IHRvIHRoZSBzYW1lIHBvc2l0aW9uIHZlcnRpY2FsbHlcbiAgICAgICAgICAgICAgICB2YXIgeVBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgdGhpcy5mYWtlRWxlbS5zdHlsZS50b3AgPSB5UG9zaXRpb24gKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5mYWtlRWxlbS5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JywgJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUVsZW0udmFsdWUgPSB0aGlzLnRleHQ7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmZha2VFbGVtKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUZXh0ID0gKDAsIF9zZWxlY3QyLmRlZmF1bHQpKHRoaXMuZmFrZUVsZW0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY29weVRleHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAncmVtb3ZlRmFrZScsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRmFrZSgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mYWtlSGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmFrZUhhbmRsZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZha2VFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuZmFrZUVsZW0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ3NlbGVjdFRhcmdldCcsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0VGFyZ2V0KCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUZXh0ID0gKDAsIF9zZWxlY3QyLmRlZmF1bHQpKHRoaXMudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvcHlUZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2NvcHlUZXh0JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb3B5VGV4dCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VjY2VlZGVkID0gdm9pZCAwO1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VlZGVkID0gZG9jdW1lbnQuZXhlY0NvbW1hbmQodGhpcy5hY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZWVkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc3VsdChzdWNjZWVkZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdoYW5kbGVSZXN1bHQnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVJlc3VsdChzdWNjZWVkZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXIuZW1pdChzdWNjZWVkZWQgPyAnc3VjY2VzcycgOiAnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogdGhpcy5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuc2VsZWN0ZWRUZXh0LFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiB0aGlzLnRyaWdnZXIsXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyU2VsZWN0aW9uOiB0aGlzLmNsZWFyU2VsZWN0aW9uLmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnY2xlYXJTZWxlY3Rpb24nLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdkZXN0cm95JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmFrZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdhY3Rpb24nLFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ2NvcHknO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fYWN0aW9uID0gYWN0aW9uO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2FjdGlvbiAhPT0gJ2NvcHknICYmIHRoaXMuX2FjdGlvbiAhPT0gJ2N1dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFwiYWN0aW9uXCIgdmFsdWUsIHVzZSBlaXRoZXIgXCJjb3B5XCIgb3IgXCJjdXRcIicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICd0YXJnZXQnLFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgKHR5cGVvZiB0YXJnZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHRhcmdldCkpID09PSAnb2JqZWN0JyAmJiB0YXJnZXQubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbiA9PT0gJ2NvcHknICYmIHRhcmdldC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgXCJ0YXJnZXRcIiBhdHRyaWJ1dGUuIFBsZWFzZSB1c2UgXCJyZWFkb25seVwiIGluc3RlYWQgb2YgXCJkaXNhYmxlZFwiIGF0dHJpYnV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3Rpb24gPT09ICdjdXQnICYmICh0YXJnZXQuaGFzQXR0cmlidXRlKCdyZWFkb25seScpIHx8IHRhcmdldC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFwidGFyZ2V0XCIgYXR0cmlidXRlLiBZb3UgY2FuXFwndCBjdXQgdGV4dCBmcm9tIGVsZW1lbnRzIHdpdGggXCJyZWFkb25seVwiIG9yIFwiZGlzYWJsZWRcIiBhdHRyaWJ1dGVzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhcmdldCA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBcInRhcmdldFwiIHZhbHVlLCB1c2UgYSB2YWxpZCBFbGVtZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV0pO1xuXG4gICAgICAgIHJldHVybiBDbGlwYm9hcmRBY3Rpb247XG4gICAgfSgpO1xuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBDbGlwYm9hcmRBY3Rpb247XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDUwOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5mdW5jdGlvbiBzZWxlY3QoZWxlbWVudCkge1xuICAgIHZhciBzZWxlY3RlZFRleHQ7XG5cbiAgICBpZiAoZWxlbWVudC5ub2RlTmFtZSA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgICAgZWxlbWVudC5mb2N1cygpO1xuXG4gICAgICAgIHNlbGVjdGVkVGV4dCA9IGVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKGVsZW1lbnQubm9kZU5hbWUgPT09ICdJTlBVVCcgfHwgZWxlbWVudC5ub2RlTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgICB2YXIgaXNSZWFkT25seSA9IGVsZW1lbnQuaGFzQXR0cmlidXRlKCdyZWFkb25seScpO1xuXG4gICAgICAgIGlmICghaXNSZWFkT25seSkge1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JywgJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5zZWxlY3QoKTtcbiAgICAgICAgZWxlbWVudC5zZXRTZWxlY3Rpb25SYW5nZSgwLCBlbGVtZW50LnZhbHVlLmxlbmd0aCk7XG5cbiAgICAgICAgaWYgKCFpc1JlYWRPbmx5KSB7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgncmVhZG9ubHknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGVjdGVkVGV4dCA9IGVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScpKSB7XG4gICAgICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgICAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuXG4gICAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhlbGVtZW50KTtcbiAgICAgICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuXG4gICAgICAgIHNlbGVjdGVkVGV4dCA9IHNlbGVjdGlvbi50b1N0cmluZygpO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxlY3RlZFRleHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2VsZWN0O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyA1MTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuZnVuY3Rpb24gRSAoKSB7XG4gIC8vIEtlZXAgdGhpcyBlbXB0eSBzbyBpdCdzIGVhc2llciB0byBpbmhlcml0IGZyb21cbiAgLy8gKHZpYSBodHRwczovL2dpdGh1Yi5jb20vbGlwc21hY2sgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRjb3JnYW4vdGlueS1lbWl0dGVyL2lzc3Vlcy8zKVxufVxuXG5FLnByb3RvdHlwZSA9IHtcbiAgb246IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaywgY3R4KSB7XG4gICAgdmFyIGUgPSB0aGlzLmUgfHwgKHRoaXMuZSA9IHt9KTtcblxuICAgIChlW25hbWVdIHx8IChlW25hbWVdID0gW10pKS5wdXNoKHtcbiAgICAgIGZuOiBjYWxsYmFjayxcbiAgICAgIGN0eDogY3R4XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICBvbmNlOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2ssIGN0eCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBmdW5jdGlvbiBsaXN0ZW5lciAoKSB7XG4gICAgICBzZWxmLm9mZihuYW1lLCBsaXN0ZW5lcik7XG4gICAgICBjYWxsYmFjay5hcHBseShjdHgsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIGxpc3RlbmVyLl8gPSBjYWxsYmFja1xuICAgIHJldHVybiB0aGlzLm9uKG5hbWUsIGxpc3RlbmVyLCBjdHgpO1xuICB9LFxuXG4gIGVtaXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIGRhdGEgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIGV2dEFyciA9ICgodGhpcy5lIHx8ICh0aGlzLmUgPSB7fSkpW25hbWVdIHx8IFtdKS5zbGljZSgpO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gZXZ0QXJyLmxlbmd0aDtcblxuICAgIGZvciAoaTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBldnRBcnJbaV0uZm4uYXBwbHkoZXZ0QXJyW2ldLmN0eCwgZGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgb2ZmOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgZSA9IHRoaXMuZSB8fCAodGhpcy5lID0ge30pO1xuICAgIHZhciBldnRzID0gZVtuYW1lXTtcbiAgICB2YXIgbGl2ZUV2ZW50cyA9IFtdO1xuXG4gICAgaWYgKGV2dHMgJiYgY2FsbGJhY2spIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBldnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChldnRzW2ldLmZuICE9PSBjYWxsYmFjayAmJiBldnRzW2ldLmZuLl8gIT09IGNhbGxiYWNrKVxuICAgICAgICAgIGxpdmVFdmVudHMucHVzaChldnRzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgZXZlbnQgZnJvbSBxdWV1ZSB0byBwcmV2ZW50IG1lbW9yeSBsZWFrXG4gICAgLy8gU3VnZ2VzdGVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9sYXpkXG4gICAgLy8gUmVmOiBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRjb3JnYW4vdGlueS1lbWl0dGVyL2NvbW1pdC9jNmViZmFhOWJjOTczYjMzZDExMGE4NGEzMDc3NDJiN2NmOTRjOTUzI2NvbW1pdGNvbW1lbnQtNTAyNDkxMFxuXG4gICAgKGxpdmVFdmVudHMubGVuZ3RoKVxuICAgICAgPyBlW25hbWVdID0gbGl2ZUV2ZW50c1xuICAgICAgOiBkZWxldGUgZVtuYW1lXTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEU7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDUyOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgaXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTtcbnZhciBkZWxlZ2F0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXG4vKipcbiAqIFZhbGlkYXRlcyBhbGwgcGFyYW1zIGFuZCBjYWxscyB0aGUgcmlnaHRcbiAqIGxpc3RlbmVyIGZ1bmN0aW9uIGJhc2VkIG9uIGl0cyB0YXJnZXQgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xIVE1MRWxlbWVudHxIVE1MQ29sbGVjdGlvbnxOb2RlTGlzdH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gbGlzdGVuKHRhcmdldCwgdHlwZSwgY2FsbGJhY2spIHtcbiAgICBpZiAoIXRhcmdldCAmJiAhdHlwZSAmJiAhY2FsbGJhY2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlcXVpcmVkIGFyZ3VtZW50cycpO1xuICAgIH1cblxuICAgIGlmICghaXMuc3RyaW5nKHR5cGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1NlY29uZCBhcmd1bWVudCBtdXN0IGJlIGEgU3RyaW5nJyk7XG4gICAgfVxuXG4gICAgaWYgKCFpcy5mbihjYWxsYmFjaykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhpcmQgYXJndW1lbnQgbXVzdCBiZSBhIEZ1bmN0aW9uJyk7XG4gICAgfVxuXG4gICAgaWYgKGlzLm5vZGUodGFyZ2V0KSkge1xuICAgICAgICByZXR1cm4gbGlzdGVuTm9kZSh0YXJnZXQsIHR5cGUsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXMubm9kZUxpc3QodGFyZ2V0KSkge1xuICAgICAgICByZXR1cm4gbGlzdGVuTm9kZUxpc3QodGFyZ2V0LCB0eXBlLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzLnN0cmluZyh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiBsaXN0ZW5TZWxlY3Rvcih0YXJnZXQsIHR5cGUsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBTdHJpbmcsIEhUTUxFbGVtZW50LCBIVE1MQ29sbGVjdGlvbiwgb3IgTm9kZUxpc3QnKTtcbiAgICB9XG59XG5cbi8qKlxuICogQWRkcyBhbiBldmVudCBsaXN0ZW5lciB0byBhIEhUTUwgZWxlbWVudFxuICogYW5kIHJldHVybnMgYSByZW1vdmUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGxpc3Rlbk5vZGUobm9kZSwgdHlwZSwgY2FsbGJhY2spIHtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2spO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEFkZCBhbiBldmVudCBsaXN0ZW5lciB0byBhIGxpc3Qgb2YgSFRNTCBlbGVtZW50c1xuICogYW5kIHJldHVybnMgYSByZW1vdmUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtOb2RlTGlzdHxIVE1MQ29sbGVjdGlvbn0gbm9kZUxpc3RcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBsaXN0ZW5Ob2RlTGlzdChub2RlTGlzdCwgdHlwZSwgY2FsbGJhY2spIHtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG5vZGVMaXN0LCBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjayk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwobm9kZUxpc3QsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGEgc2VsZWN0b3JcbiAqIGFuZCByZXR1cm5zIGEgcmVtb3ZlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGxpc3RlblNlbGVjdG9yKHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBkZWxlZ2F0ZShkb2N1bWVudC5ib2R5LCBzZWxlY3RvciwgdHlwZSwgY2FsbGJhY2spO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RlbjtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gNTM6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8qKlxuICogQ2hlY2sgaWYgYXJndW1lbnQgaXMgYSBIVE1MIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLm5vZGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICYmIHZhbHVlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnRcbiAgICAgICAgJiYgdmFsdWUubm9kZVR5cGUgPT09IDE7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGFyZ3VtZW50IGlzIGEgbGlzdCBvZiBIVE1MIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZXhwb3J0cy5ub2RlTGlzdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIHR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXG4gICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWRcbiAgICAgICAgJiYgKHR5cGUgPT09ICdbb2JqZWN0IE5vZGVMaXN0XScgfHwgdHlwZSA9PT0gJ1tvYmplY3QgSFRNTENvbGxlY3Rpb25dJylcbiAgICAgICAgJiYgKCdsZW5ndGgnIGluIHZhbHVlKVxuICAgICAgICAmJiAodmFsdWUubGVuZ3RoID09PSAwIHx8IGV4cG9ydHMubm9kZSh2YWx1ZVswXSkpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhcmd1bWVudCBpcyBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsdWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmV4cG9ydHMuc3RyaW5nID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJ1xuICAgICAgICB8fCB2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZztcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYXJndW1lbnQgaXMgYSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsdWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmV4cG9ydHMuZm4gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcblxuICAgIHJldHVybiB0eXBlID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gNTQ6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBjbG9zZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5cbi8qKlxuICogRGVsZWdhdGVzIGV2ZW50IHRvIGEgc2VsZWN0b3IuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtCb29sZWFufSB1c2VDYXB0dXJlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIF9kZWxlZ2F0ZShlbGVtZW50LCBzZWxlY3RvciwgdHlwZSwgY2FsbGJhY2ssIHVzZUNhcHR1cmUpIHtcbiAgICB2YXIgbGlzdGVuZXJGbiA9IGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXJGbiwgdXNlQ2FwdHVyZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lckZuLCB1c2VDYXB0dXJlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBEZWxlZ2F0ZXMgZXZlbnQgdG8gYSBzZWxlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfEFycmF5fSBbZWxlbWVudHNdXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHBhcmFtIHtCb29sZWFufSB1c2VDYXB0dXJlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGRlbGVnYXRlKGVsZW1lbnRzLCBzZWxlY3RvciwgdHlwZSwgY2FsbGJhY2ssIHVzZUNhcHR1cmUpIHtcbiAgICAvLyBIYW5kbGUgdGhlIHJlZ3VsYXIgRWxlbWVudCB1c2FnZVxuICAgIGlmICh0eXBlb2YgZWxlbWVudHMuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gX2RlbGVnYXRlLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIEVsZW1lbnQtbGVzcyB1c2FnZSwgaXQgZGVmYXVsdHMgdG8gZ2xvYmFsIGRlbGVnYXRpb25cbiAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gVXNlIGBkb2N1bWVudGAgYXMgdGhlIGZpcnN0IHBhcmFtZXRlciwgdGhlbiBhcHBseSBhcmd1bWVudHNcbiAgICAgICAgLy8gVGhpcyBpcyBhIHNob3J0IHdheSB0byAudW5zaGlmdCBgYXJndW1lbnRzYCB3aXRob3V0IHJ1bm5pbmcgaW50byBkZW9wdGltaXphdGlvbnNcbiAgICAgICAgcmV0dXJuIF9kZWxlZ2F0ZS5iaW5kKG51bGwsIGRvY3VtZW50KS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBTZWxlY3Rvci1iYXNlZCB1c2FnZVxuICAgIGlmICh0eXBlb2YgZWxlbWVudHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtZW50cyk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIEFycmF5LWxpa2UgYmFzZWQgdXNhZ2VcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGVsZW1lbnRzLCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gX2RlbGVnYXRlKGVsZW1lbnQsIHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjaywgdXNlQ2FwdHVyZSk7XG4gICAgfSk7XG59XG5cbi8qKlxuICogRmluZHMgY2xvc2VzdCBtYXRjaCBhbmQgaW52b2tlcyBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gbGlzdGVuZXIoZWxlbWVudCwgc2VsZWN0b3IsIHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5kZWxlZ2F0ZVRhcmdldCA9IGNsb3Nlc3QoZS50YXJnZXQsIHNlbGVjdG9yKTtcblxuICAgICAgICBpZiAoZS5kZWxlZ2F0ZVRhcmdldCkge1xuICAgICAgICAgICAgY2FsbGJhY2suY2FsbChlbGVtZW50LCBlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZWxlZ2F0ZTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gNTU6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbnZhciBET0NVTUVOVF9OT0RFX1RZUEUgPSA5O1xuXG4vKipcbiAqIEEgcG9seWZpbGwgZm9yIEVsZW1lbnQubWF0Y2hlcygpXG4gKi9cbmlmICh0eXBlb2YgRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpIHtcbiAgICB2YXIgcHJvdG8gPSBFbGVtZW50LnByb3RvdHlwZTtcblxuICAgIHByb3RvLm1hdGNoZXMgPSBwcm90by5tYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgICAgICAgICAgICAgICAgcHJvdG8ubW96TWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICAgICAgICAgIHByb3RvLm1zTWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICAgICAgICAgIHByb3RvLm9NYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgICAgICAgICAgICAgICAgcHJvdG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBjbG9zZXN0IHBhcmVudCB0aGF0IG1hdGNoZXMgYSBzZWxlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIGNsb3Nlc3QgKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gICAgd2hpbGUgKGVsZW1lbnQgJiYgZWxlbWVudC5ub2RlVHlwZSAhPT0gRE9DVU1FTlRfTk9ERV9UWVBFKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5tYXRjaGVzID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICBlbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpKSB7XG4gICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2xvc2VzdDtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gNTY6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuXG4vKioqLyA1Nzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpO1xuXG52YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblxudmFyIF9rbm9ja291dCA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfa25vY2tvdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa25vY2tvdXQpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBpbml0KHBhcmFtcykge1xuICB0aGlzLm5hbWUgPSBwYXJhbXMubmFtZSB8fCAnJztcbiAgdGhpcy5saW5rID0gcGFyYW1zLmxpbmsgfHwgJyc7XG59XG5fa25vY2tvdXQyLmRlZmF1bHQuY29tcG9uZW50cy5yZWdpc3RlcigneS10aXRsZScsIHtcbiAgdmlld01vZGVsOiBpbml0LFxuICB0ZW1wbGF0ZTogX2luZGV4Mi5kZWZhdWx0XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDU4OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IFwiPGgxPlxcclxcbiAgPHNwYW4gZGF0YS1iaW5kPVxcXCJ0ZXh0OiBuYW1lXFxcIj48L3NwYW4+57uE5Lu2XFxyXFxuPC9oMT5cXHJcXG48IS0tIGtvIGlmOiBsaW5rLS0+XFxyXFxuPGgyPlxcclxcbiAgPGEgZGF0YS1iaW5kPVxcXCJhdHRyOiB7aHJlZjogbGlua31cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIiBzdHlsZT1cXFwiY29sb3I6ICMyYmFlZTlcXFwiPlxcclxcbiAgICA8c3BhbiBkYXRhLWJpbmQ9XFxcInRleHQ6IG5hbWVcXFwiPjwvc3Bhbj7nu4Tku7ZBUEnmlofmoaNcXHJcXG4gIDwvYT5cXHJcXG48L2gyPlxcclxcbjwhLS0gL2tvIC0tPlxcclxcbjxoMj7ku6PnoIHnpLrkvos8L2gyPlxcclxcblwiO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gNjU6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJ5LWJveFxcXCI+XFxyXFxuICA8eS10aXRsZSBwYXJhbXM9XFxcIm5hbWU6ICdtb2RlbOaooeaAgeahhicsIGxpbms6ICdodHRwczovL2dpdGh1Yi5jb20veW9ueW91eWMvYmxvZy9pc3N1ZXMvMzgnXFxcIj48L3ktdGl0bGU+XFxyXFxuICAgIDxkZW1vIHBhcmFtcz1cXFwiY29kZTpjb2RlWzBdXFxcIj5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJjb2RlLXRvcFxcXCI+XFxyXFxuICAgICAgICA8eS1idXR0b24gcGFyYW1zPVxcXCJ0eXBlOidnaG9zdCcsIGNsaWNrOiRwYXJlbnQuc2hvd01vZGFsXFxcIj7mmL7npLrlvLnmoYY8L3ktYnV0dG9uPlxcclxcbiAgICAgICAgPHktbW9kYWwgcGFyYW1zPVxcXCJ2aXNpYmxlOiAkcGFyZW50Lm1vZGFsVmlzaWJsZSwgd2lkdGg6JzcwMHB4JywgdGl0bGU6J+aZrumAmueahE1vZGFs5a+56K+d5qGGJywgb2s6ICRwYXJlbnQuaGFuZGxlT2tcXFwiPlxcclxcbiAgICAgICAgICA8cD7miJHor7Q8L3A+XFxyXFxuICAgICAgICAgIDxwPuefreWPkeefreWPkTwvcD5cXHJcXG4gICAgICAgICAgPHA+5aeR5aiYPC9wPlxcclxcbiAgICAgICAgPC95LW1vZGFsPlxcclxcbiAgICAgIDwvZGl2PlxcclxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImNvZGUtc3BsaXRcXFwiPlxcclxcbiAgICAgICAgPHNwYW4+5Z+656GA55So5rOVPC9zcGFuPlxcclxcbiAgICAgIDwvZGl2PlxcclxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImNvZGUtYm90dG9tXFxcIj5cXHJcXG4gICAgICAgIOacgOeugOWNleeahOS9v+eUqOaWueazle+8jOmAmui/h+aOp+WItuWxnuaAp3Zpc2libGXmnaXmmL7npLogLyDpmpDol4/lr7nor53moYbjgII8YnI+XFxyXFxuICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGVtbz5cXHJcXG5cXHJcXG4gICAgPGRlbW8gcGFyYW1zPVxcXCJjb2RlOmNvZGVbMV1cXFwiPlxcclxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImNvZGUtdG9wXFxcIj5cXHJcXG4gICAgICAgIDx5LWJ1dHRvbiBwYXJhbXM9XFxcInR5cGU6J2dob3N0JywgY2xpY2s6ZnVuY3Rpb24oKXskcGFyZW50LnNob3dNb2RhbDEoJHBhcmVudHMpfVxcXCI+5pi+56S65by55qGGPC95LWJ1dHRvbj5cXHJcXG4gICAgICAgIDx5LW1vZGFsIHBhcmFtcz1cXFwidmlzaWJsZTogJHBhcmVudC5tb2RhbFZpc2libGUxLCB3aWR0aDonNzAwcHgnLHRpdGxlOifmt7vliqDmoKHpqoznmoRNb2RhbOWvueivneahhicsdmFsaWRhdGVGbjokcm9vdC52YWxpZGF0ZUZuLGVycm9ybXNnOifor7foh7PlsJHpgInmi6nkuIDmnaHmlbDmja7vvIEnXFxcIj5cXHJcXG4gICAgICAgICAgPHktZ3JpZCBwYXJhbXM9XFxcInJlZjonbW9kYWxncmlkJyxjb2x1bW5zOiAkcm9vdC5jb2x1bW5zLHJvd3M6ICRyb290LnJvd3Msb25Sb3dTZWxlY3Q6JHJvb3Qub25Sb3dTZWxlY3QsaXNTdHJpcGU6dHJ1ZVxcXCI+PC95LWdyaWQ+XFxyXFxuICAgICAgICA8L3ktbW9kYWw+XFxyXFxuICAgICAgPC9kaXY+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY29kZS1zcGxpdFxcXCI+XFxyXFxuICAgICAgICA8c3Bhbj7moKHpqozlr7nor53moYY8L3NwYW4+XFxyXFxuICAgICAgPC9kaXY+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY29kZS1ib3R0b21cXFwiPlxcclxcbiAgICAgICAg57uR5a6abW9kYWznmoQ8Y29kZT52YWxpZGF0ZUZuPC9jb2RlPuS6i+S7tu+8jOmAmui/h+iHquWumuS5ieinhOWImemYu+atouaooeaAgeahhueahOehruWumuS6i+S7tuinpuWPkeW5tue7meWHuuaPkOekuuOAgjxicj5cXHJcXG4gICAgICA8L2Rpdj5cXHJcXG4gICAgPC9kZW1vPlxcclxcblxcclxcbiAgICA8ZGVtbyBwYXJhbXM9XFxcImNvZGU6Y29kZVsyXVxcXCI+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY29kZS10b3BcXFwiPlxcclxcbiAgICAgICAgPHktYnV0dG9uIHBhcmFtcz1cXFwidHlwZTonZ2hvc3QnLCBjbGljazokcGFyZW50LnNob3dNb2RhbDJcXFwiPuaYvuekuuW8ueahhjwveS1idXR0b24+XFxyXFxuICAgICAgICA8eS1tb2RhbCBwYXJhbXM9XFxcInZpc2libGU6ICRwYXJlbnQubW9kYWxWaXNpYmxlMiwgd2lkdGg6JzcwMHB4Jyx0aXRsZTon6Ieq5Yqo6YCC6YWN6auY5bqm55qETW9kYWzlr7nor53moYYnXFxcIj5cXHJcXG4gICAgICAgICAgPHNwYW4+55m+5a625aeTOiA8L3NwYW4+XFxyXFxuICAgICAgICAgIDx5LWdyaWQgcGFyYW1zPVxcXCJtb2RhbEJvZHlNb2RhbEhlaWdodDpib2R5TWF4SGVpZ2h0LG1vZGFsQm9keUV4dHJhSGVpZ2h0OicyMHB4JyxvblJvd1NlbGVjdDokcm9vdC5vblJvd1NlbGVjdCxjb2x1bW5zOiAkcm9vdC5jb2x1bW5zLHJvd3M6ICRyb290LnJvd3MyLGxvY2toZWFkOnRydWVcXFwiPjwveS1ncmlkPlxcclxcbiAgICAgICAgPC95LW1vZGFsPlxcclxcbiAgICAgIDwvZGl2PlxcclxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImNvZGUtc3BsaXRcXFwiPlxcclxcbiAgICAgICAgPHNwYW4+6Ieq5Yqo6YCC6YWN6auY5bqm55qETW9kYWzlr7nor53moYY8L3NwYW4+XFxyXFxuICAgICAgPC9kaXY+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY29kZS1ib3R0b21cXFwiPlxcclxcbiAgICAgICAg5bCGbW9kYWznmoQ8Y29kZT5ib2R5TWF4SGVpZ2h0PC9jb2RlPuS8oOmAkue7meS4i+Wxgue7hOS7tueahG1vZGFsQm9keU1vZGFsSGVpZ2h0KOebruWJjeWPqumAgueUqOS6jmdyaWTnu4Tku7Yp77yM5L2/5b6X5LiL5bGC57uE5Lu255qE6auY5bqm6Ieq5Yqo6YCC6YWN44CCPGJyPlxcclxcbiAgICAgICAgbW9kYWxCb2R5RXh0cmFIZWlnaHTlsZ7mgKfvvIzmmK9tb2RhbOWGhemDqOmZpOWOu2dyaWTnmoTpq5jluqbku6XlpJbov5jmnInlk6rkupvpq5jluqbopoHljrvpmaTvvIzkvovlpoLmnKzkvovnmoTnmb7lrrblp5PjgIJcXHJcXG4gICAgICA8L2Rpdj5cXHJcXG4gICAgPC9kZW1vPlxcclxcbiAgPC9kaXY+XFxyXFxuXCI7XG5cbi8qKiovIH0pXG5cbn0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsaWJzLjEwLjQ0YWM3YjdiMWY1MmY1NzRiMjhlLmpzIiwiaW1wb3J0IHRlbXBsYXRlIGZyb20gJy4vaW5kZXguaHRtbCdcclxuaW1wb3J0IGtvIGZyb20gJ2tub2Nrb3V0J1xyXG5pbXBvcnQgJ0AvY29tcG9uZW50cydcclxuZnVuY3Rpb24gaW5pdCAoKSB7XHJcbiAgbGV0IHZpZXdtb2RlbCA9IHtcclxuICAgIGNvZGU6IFtcclxuICAgICAgYFxyXG4gICAgICA8dGVtcGxhdGU+XHJcbiAgICAgICAgPHktYnV0dG9uIHBhcmFtcz1cInR5cGU6J2dob3N0JywgY2xpY2s6JHBhcmVudC5zaG93TW9kYWxcIj7mmL7npLrlvLnmoYY8L3ktYnV0dG9uPlxyXG4gICAgICAgIDx5LW1vZGFsIHBhcmFtcz1cInZpc2libGU6ICRwYXJlbnQubW9kYWxWaXNpYmxlLCB3aWR0aDonNzAwcHgnLHRpdGxlOifmma7pgJrnmoRNb2RhbOWvueivneahhicsb2s6ICRwYXJlbnQuaGFuZGxlT2tcIj5cclxuICAgICAgICAgIDxwPuaIkeivtDwvcD5cclxuICAgICAgICAgIDxwPuefreWPkeefreWPkTwvcD5cclxuICAgICAgICAgIDxwPuWnkeWomDwvcD5cclxuICAgICAgICA8L3ktbW9kYWw+XHJcbiAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgdmFyIHZpZXdtb2RlbCA9IHtcclxuICAgICAgICAgIG1vZGFsVmlzaWJsZToga28ub2JzZXJ2YWJsZShmYWxzZSksXHJcbiAgICAgICAgICBzaG93TW9kYWw6ICgpID0+IHtcclxuICAgICAgICAgICAgdmlld21vZGVsLm1vZGFsVmlzaWJsZSh0cnVlKVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGhhbmRsZU9rOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy55Y2xvdWQubm90aWNlLmluZm8oJ+S9oOeCueWHu+S6huehruWumu+8gScpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICA8L3NjcmlwdD5cclxuICAgICAgYCxcclxuICAgICAgYFxyXG4gICAgICA8dGVtcGxhdGU+XHJcbiAgICAgICAgPHktYnV0dG9uIHBhcmFtcz1cInR5cGU6J2dob3N0JywgY2xpY2s6ZnVuY3Rpb24oKXskcGFyZW50LnNob3dNb2RhbDEoJHBhcmVudHMpfVwiPuaYvuekuuW8ueahhjwveS1idXR0b24+XHJcbiAgICAgICAgPHktbW9kYWwgcGFyYW1zPVwidmlzaWJsZTogJHBhcmVudC5tb2RhbFZpc2libGUxLCB3aWR0aDonNzAwcHgnLHRpdGxlOifmt7vliqDmoKHpqoznmoRNb2RhbOWvueivneahhicsdmFsaWRhdGVGbjokcm9vdC52YWxpZGF0ZUZuLGVycm9ybXNnOifor7foh7PlsJHpgInmi6nkuIDmnaHmlbDmja7vvIEnXCI+XHJcbiAgICAgICAgICA8eS1ncmlkIHBhcmFtcz1cInJlZjonbW9kYWxncmlkJyxjb2x1bW5zOiAkcm9vdC5jb2x1bW5zLHJvd3M6ICRyb290LnJvd3Msb25Sb3dTZWxlY3Q6JHJvb3Qub25Sb3dTZWxlY3QsaXNTdHJpcGU6dHJ1ZVwiPjwveS1ncmlkPlxyXG4gICAgICAgIDwveS1tb2RhbD5cclxuICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgPHNjcmlwdD5cclxuICAgICAgICB2YXIgdmlld21vZGVsID0ge1xyXG4gICAgICAgICAgbW9kYWxWaXNpYmxlMToga28ub2JzZXJ2YWJsZShmYWxzZSksXHJcbiAgICAgICAgICBzaG93TW9kYWwxOiAodmFsKSA9PiB7XHJcbiAgICAgICAgICAgIHZpZXdtb2RlbC5tb2RhbFZpc2libGUxKHRydWUpXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcm93czoga28ub2JzZXJ2YWJsZUFycmF5KFtcclxuICAgICAgICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDEpLCBuYW1lOiBrby5vYnNlcnZhYmxlKCfmnY7mmI4nKX0sXHJcbiAgICAgICAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgyKSwgbmFtZToga28ub2JzZXJ2YWJsZSgn6Z+p5qKF5qKFJyl9LFxyXG4gICAgICAgICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMyksIG5hbWU6IGtvLm9ic2VydmFibGUoJ+S4ueWwvCcpfVxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgICBjb2x1bW5zOiBrby5vYnNlcnZhYmxlQXJyYXkoW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgICAgICAgIGZpZWxkOiAnaWQnLFxyXG4gICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXHJcbiAgICAgICAgICAgICAgaGlkZGVuOiBmYWxzZSxcclxuICAgICAgICAgICAgICB3aWR0aDogNTBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHRpdGxlOiAnbmFtZScsXHJcbiAgICAgICAgICAgICAgZmllbGQ6ICduYW1lJyxcclxuICAgICAgICAgICAgICB3aWR0aDogJzIwJSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGZpZWxkOiAnaWQnLFxyXG4gICAgICAgICAgICAgIHRpdGxlOiAncmVuZGVyRm4nLFxyXG4gICAgICAgICAgICAgIHR5cGU6ICdyZW5kZXInLFxyXG4gICAgICAgICAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgcmVuZGVyRm46IGZ1bmN0aW9uIChyb3csIGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxzcGFuPumAmui/h3JlbmRlcuWHveaVsOeUn+aIkOeahGh0bWzniYfmrrU8c3Bhbj4nXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgZmllbGQ6ICdpZCcsXHJcbiAgICAgICAgICAgICAgdGl0bGU6ICdvcGVyYXRpb24nLFxyXG4gICAgICAgICAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgdHlwZTogJ29wZXJhdGlvbicsXHJcbiAgICAgICAgICAgICAgd2lkdGg6ICcyMCUnLFxyXG4gICAgICAgICAgICAgIG9wZXJhdGlvbkxpc3Q6IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmk43kvZwxJyxcclxuICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChyb3csIGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmk43kvZwxJylcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXSksXHJcbiAgICAgICAgICBvblJvd1NlbGVjdDogZnVuY3Rpb24gKHJvdykge30sXHJcbiAgICAgICAgICB2YWxpZGF0ZUZuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxldCBncmlkID0gd2luZG93LnljbG91ZC4kcmVmc1snbW9kYWxncmlkJ11cclxuICAgICAgICAgICAgaWYgKGdyaWQuZ2V0U2VsZWN0ZWRSb3dzKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IFxyXG4gICAgICA8L3NjcmlwdD5cclxuICAgICAgYCxcclxuICAgICAgYFxyXG4gICAgICA8dGVtcGxhdGU+XHJcbiAgICAgICAgPHktYnV0dG9uIHBhcmFtcz1cInR5cGU6J2dob3N0JywgY2xpY2s6JHBhcmVudC5zaG93TW9kYWwyXCI+5pi+56S65by55qGGPC95LWJ1dHRvbj5cclxuICAgICAgICA8eS1tb2RhbCBwYXJhbXM9XCJ2aXNpYmxlOiAkcGFyZW50Lm1vZGFsVmlzaWJsZTIsIHdpZHRoOic3MDBweCcsdGl0bGU6J+iHquWKqOmAgumFjemrmOW6pueahE1vZGFs5a+56K+d5qGGJ1wiPlxyXG4gICAgICAgICAgPHNwYW4+55m+5a625aeTOiA8L3NwYW4+XHJcbiAgICAgICAgICA8eS1ncmlkIHBhcmFtcz1cIm1vZGFsQm9keU1vZGFsSGVpZ2h0OmJvZHlNYXhIZWlnaHQsbW9kYWxCb2R5RXh0cmFIZWlnaHQ6JzIwcHgnLG9uUm93U2VsZWN0OiRyb290Lm9uUm93U2VsZWN0LGNvbHVtbnM6ICRyb290LmNvbHVtbnMscm93czogJHJvb3Qucm93czIsbG9ja2hlYWQ6dHJ1ZVwiPjwveS1ncmlkPlxyXG4gICAgICAgIDwveS1tb2RhbD5cclxuICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgPHNjcmlwdD5cclxuICAgICAgICB2YXIgdmlld21vZGVsID0ge1xyXG4gICAgICAgICAgbW9kYWxWaXNpYmxlMjoga28ub2JzZXJ2YWJsZShmYWxzZSksXHJcbiAgICAgICAgICBzaG93TW9kYWwyOiAodmFsKSA9PiB7XHJcbiAgICAgICAgICAgIHZpZXdtb2RlbC5tb2RhbFZpc2libGUyKHRydWUpXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcm93czI6IGtvLm9ic2VydmFibGVBcnJheShbXHJcbiAgICAgICAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgxKSwgbmFtZToga28ub2JzZXJ2YWJsZSgn6LW1Jyl9LFxyXG4gICAgICAgICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMiksIG5hbWU6IGtvLm9ic2VydmFibGUoJ+mSsScpfSxcclxuICAgICAgICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDMpLCBuYW1lOiBrby5vYnNlcnZhYmxlKCflrZknKX0sXHJcbiAgICAgICAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgxKSwgbmFtZToga28ub2JzZXJ2YWJsZSgn5p2OJyl9LFxyXG4gICAgICAgICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMiksIG5hbWU6IGtvLm9ic2VydmFibGUoJ+WRqCcpfSxcclxuICAgICAgICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDMpLCBuYW1lOiBrby5vYnNlcnZhYmxlKCflkLQnKX0sXHJcbiAgICAgICAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgxKSwgbmFtZToga28ub2JzZXJ2YWJsZSgn6YORJyl9LFxyXG4gICAgICAgICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMiksIG5hbWU6IGtvLm9ic2VydmFibGUoJ+eOiycpfSxcclxuICAgICAgICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDMpLCBuYW1lOiBrby5vYnNlcnZhYmxlKCflhq8nKX0sXHJcbiAgICAgICAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgzKSwgbmFtZToga28ub2JzZXJ2YWJsZSgn6ZmIJyl9LFxyXG4gICAgICAgICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMyksIG5hbWU6IGtvLm9ic2VydmFibGUoJ+ikmicpfSxcclxuICAgICAgICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDMpLCBuYW1lOiBrby5vYnNlcnZhYmxlKCfljasnKX1cclxuICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgY29sdW1uczoga28ub2JzZXJ2YWJsZUFycmF5KFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICAgICAgICBmaWVsZDogJ2lkJyxcclxuICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxyXG4gICAgICAgICAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgd2lkdGg6IDUwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0aXRsZTogJ25hbWUnLFxyXG4gICAgICAgICAgICAgIGZpZWxkOiAnbmFtZScsXHJcbiAgICAgICAgICAgICAgd2lkdGg6ICcyMCUnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBmaWVsZDogJ2lkJyxcclxuICAgICAgICAgICAgICB0aXRsZTogJ3JlbmRlckZuJyxcclxuICAgICAgICAgICAgICB0eXBlOiAncmVuZGVyJyxcclxuICAgICAgICAgICAgICBoaWRkZW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgIHJlbmRlckZuOiBmdW5jdGlvbiAocm93LCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICc8c3Bhbj7pgJrov4dyZW5kZXLlh73mlbDnlJ/miJDnmoRodG1s54mH5q61PHNwYW4+J1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgIGZpZWxkOiAnaWQnLFxyXG4gICAgICAgICAgICAgIHRpdGxlOiAnb3BlcmF0aW9uJyxcclxuICAgICAgICAgICAgICBoaWRkZW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgIHR5cGU6ICdvcGVyYXRpb24nLFxyXG4gICAgICAgICAgICAgIHdpZHRoOiAnMjAlJyxcclxuICAgICAgICAgICAgICBvcGVyYXRpb25MaXN0OiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5pON5L2cJyxcclxuICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChyb3csIGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfmk43kvZwnKVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdKVxyXG4gICAgICAgIH1cclxuICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgIGBcclxuICAgIF0sXHJcbiAgICAvLyDln7rmnKxcclxuICAgIG1vZGFsVmlzaWJsZToga28ub2JzZXJ2YWJsZShmYWxzZSksXHJcbiAgICBzaG93TW9kYWw6ICh2YWwpID0+IHtcclxuICAgICAgdmlld21vZGVsLm1vZGFsVmlzaWJsZSh0cnVlKVxyXG4gICAgfSxcclxuICAgIC8vIOagoemqjFxyXG4gICAgbW9kYWxWaXNpYmxlMToga28ub2JzZXJ2YWJsZShmYWxzZSksXHJcbiAgICBzaG93TW9kYWwxOiAodmFsKSA9PiB7XHJcbiAgICAgIHZpZXdtb2RlbC5tb2RhbFZpc2libGUxKHRydWUpXHJcbiAgICB9LFxyXG4gICAgLy8gbW9kZWzmnIDlpKfpq5jluqZcclxuICAgIG1vZGFsVmlzaWJsZTI6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxyXG4gICAgc2hvd01vZGFsMjogKHZhbCkgPT4ge1xyXG4gICAgICB2aWV3bW9kZWwubW9kYWxWaXNpYmxlMih0cnVlKVxyXG4gICAgfSxcclxuICAgIHJvd3M6IGtvLm9ic2VydmFibGVBcnJheShbXHJcbiAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgxKSwgbmFtZToga28ub2JzZXJ2YWJsZSgn5p2O5piOJyl9LFxyXG4gICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMiksIG5hbWU6IGtvLm9ic2VydmFibGUoJ+mfqeaiheaihScpfSxcclxuICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDMpLCBuYW1lOiBrby5vYnNlcnZhYmxlKCfkuLnlsLwnKX1cclxuICAgIF0pLFxyXG4gICAgcm93czI6IGtvLm9ic2VydmFibGVBcnJheShbXHJcbiAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgxKSwgbmFtZToga28ub2JzZXJ2YWJsZSgn6LW1Jyl9LFxyXG4gICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMiksIG5hbWU6IGtvLm9ic2VydmFibGUoJ+mSsScpfSxcclxuICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDMpLCBuYW1lOiBrby5vYnNlcnZhYmxlKCflrZknKX0sXHJcbiAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgxKSwgbmFtZToga28ub2JzZXJ2YWJsZSgn5p2OJyl9LFxyXG4gICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMiksIG5hbWU6IGtvLm9ic2VydmFibGUoJ+WRqCcpfSxcclxuICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDMpLCBuYW1lOiBrby5vYnNlcnZhYmxlKCflkLQnKX0sXHJcbiAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgxKSwgbmFtZToga28ub2JzZXJ2YWJsZSgn6YORJyl9LFxyXG4gICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMiksIG5hbWU6IGtvLm9ic2VydmFibGUoJ+eOiycpfSxcclxuICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDMpLCBuYW1lOiBrby5vYnNlcnZhYmxlKCflhq8nKX0sXHJcbiAgICAgIHtpZDoga28ub2JzZXJ2YWJsZSgzKSwgbmFtZToga28ub2JzZXJ2YWJsZSgn6ZmIJyl9LFxyXG4gICAgICB7aWQ6IGtvLm9ic2VydmFibGUoMyksIG5hbWU6IGtvLm9ic2VydmFibGUoJ+ikmicpfSxcclxuICAgICAge2lkOiBrby5vYnNlcnZhYmxlKDMpLCBuYW1lOiBrby5vYnNlcnZhYmxlKCfljasnKX1cclxuICAgIF0pLFxyXG4gICAgY29sdW1uczoga28ub2JzZXJ2YWJsZUFycmF5KFtcclxuICAgICAge1xyXG4gICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICBmaWVsZDogJ2lkJyxcclxuICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxyXG4gICAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgICAgd2lkdGg6IDUwXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB0aXRsZTogJ25hbWUnLFxyXG4gICAgICAgIGZpZWxkOiAnbmFtZScsXHJcbiAgICAgICAgd2lkdGg6ICcyMCUnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBmaWVsZDogJ2lkJyxcclxuICAgICAgICB0aXRsZTogJ3JlbmRlckZuJyxcclxuICAgICAgICB0eXBlOiAncmVuZGVyJyxcclxuICAgICAgICBoaWRkZW46IGZhbHNlLFxyXG4gICAgICAgIHJlbmRlckZuOiBmdW5jdGlvbiAocm93LCBpbmRleCkge1xyXG4gICAgICAgICAgcmV0dXJuICc8c3Bhbj7pgJrov4dyZW5kZXLlh73mlbDnlJ/miJDnmoRodG1s54mH5q61PHNwYW4+J1xyXG4gICAgICAgIH1cclxuICAgICAgfSwge1xyXG4gICAgICAgIGZpZWxkOiAnaWQnLFxyXG4gICAgICAgIHRpdGxlOiAnb3BlcmF0aW9uJyxcclxuICAgICAgICBoaWRkZW46IGZhbHNlLFxyXG4gICAgICAgIHR5cGU6ICdvcGVyYXRpb24nLFxyXG4gICAgICAgIHdpZHRoOiAnMjAlJyxcclxuICAgICAgICBvcGVyYXRpb25MaXN0OiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn5pON5L2cJyxcclxuICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIChyb3csIGV2dCkge1xyXG4gICAgICAgICAgICAgIGFsZXJ0KCfmk43kvZwnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcbiAgICBdKSxcclxuICAgIG9uUm93U2VsZWN0OiBmdW5jdGlvbiAocm93KSB7fSxcclxuICAgIHZhbGlkYXRlRm46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgbGV0IGdyaWQgPSB3aW5kb3cueWNsb3VkLiRyZWZzWydtb2RhbGdyaWQnXVxyXG4gICAgICBpZiAoZ3JpZC5nZXRTZWxlY3RlZFJvd3MoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGhhbmRsZU9rOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHdpbmRvdy55Y2xvdWQubm90aWNlLmluZm8oJ+S9oOeCueWHu+S6huehruWumu+8gScpXHJcbiAgICB9XHJcbiAgfVxyXG4gIGtvLmFwcGx5QmluZGluZ3Modmlld21vZGVsLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJykpXHJcbn1cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIHRlbXBsYXRlLFxyXG4gIGluaXRcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdmlld3MvbW9kYWwvaW5kZXguanMiLCJpbXBvcnQgJy4vZGVtbydcclxuaW1wb3J0ICcuL3RpdGxlJ1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9pbmRleC5qcyIsImltcG9ydCB0cGwgZnJvbSAnLi9pbmRleC5odG1sJ1xyXG5pbXBvcnQgJy4vaW5kZXgubGVzcydcclxuaW1wb3J0ICcuLi9jb2RlJ1xyXG5pbXBvcnQga28gZnJvbSAna25vY2tvdXQnXHJcbmZ1bmN0aW9uIGluaXQgKHBhcmFtcykge1xyXG4gIHRoaXMuY29kZSA9IHBhcmFtcy5jb2RlXHJcbiAgdGhpcy5pc1Nob3dBbGwgPSBrby5vYnNlcnZhYmxlKGZhbHNlKVxyXG4gIHRoaXMudG9nZ2xlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5pc1Nob3dBbGwoIXRoaXMuaXNTaG93QWxsKCkpXHJcbiAgfS5iaW5kKHRoaXMpXHJcbn1cclxua28uY29tcG9uZW50cy5yZWdpc3RlcignZGVtbycsIHtcclxuICB2aWV3TW9kZWw6IGluaXQsXHJcbiAgdGVtcGxhdGU6IHRwbFxyXG59KVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50cy9kZW1vL2luZGV4LmpzIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImRlbW9cXFwiPlxcclxcbiAgPGRpdiBjbGFzcz1cXFwiZGVtby1zaG93XFxcIj5cXHJcXG4gIDwhLS0ga28gdGVtcGxhdGU6IHsgbm9kZXM6ICRjb21wb25lbnRUZW1wbGF0ZU5vZGVzIH0gLS0+PCEtLSAva28gLS0+XFxyXFxuICA8L2Rpdj5cXHJcXG4gIDxkaXYgY2xhc3M9XFxcImRlbW8tc3BsaXRcXFwiPjwvZGl2PlxcclxcbiAgPGRpdiBjbGFzcz1cXFwiZGVtby1jb2RlXFxcIiBkYXRhLWJpbmQ9XFxcImNzczp7J2RlbW8taGlkZUNvZGUnOiFpc1Nob3dBbGwoKX1cXFwiPlxcclxcbiAgICA8eS1jb2RlIHBhcmFtcz1cXFwiY29kZTpjb2RlXFxcIj48L3ktY29kZT5cXHJcXG4gIDwvZGl2PlxcclxcbiAgPGRpdiBjbGFzcz1cXFwiZGVtby10b2dnbGVcXFwiIGRhdGEtYmluZD1cXFwiY2xpY2s6dG9nZ2xlXFxcIj48c3BhbiBjbGFzcz1cXFwiZmFcXFwiIGRhdGEtYmluZD1cXFwiY3NzOnsnZmEtYW5nbGUtZG91YmxlLWRvd24nOiFpc1Nob3dBbGwoKSwnZmEtYW5nbGUtZG91YmxlLXVwJzppc1Nob3dBbGwoKX1cXFwiPjwvc3Bhbj48L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG5cIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9jb21wb25lbnRzL2RlbW8vaW5kZXguaHRtbFxuLy8gbW9kdWxlIGlkID0gNDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEgMiAzIDQgNSA2IDcgOCA5IDEwIDExIDEyIDEzIDE0IDE1IDE2IDE3IDE4IDE5IDIwIDIxIDIyIDIzIDI0IDI1IiwiaW1wb3J0IHRwbCBmcm9tICcuL2luZGV4Lmh0bWwnXHJcbmltcG9ydCAnLi9pbmRleC5sZXNzJ1xyXG5pbXBvcnQga28gZnJvbSAna25vY2tvdXQnXHJcbmltcG9ydCBobGpzIGZyb20gJ2hpZ2hsaWdodGpzJ1xyXG5pbXBvcnQgQ2xpcGJvYXJkIGZyb20gJ2NsaXBib2FyZCdcclxuaW1wb3J0ICdoaWdobGlnaHRqcy9zdHlsZXMvZ2l0aHViLmNzcydcclxuLy8gaW1wb3J0IHsgZGVidWcgfSBmcm9tICd1dGlsJ1xyXG5mdW5jdGlvbiBJbml0IChwYXJhbXMsIGVsKSB7XHJcbiAgLy8g5Y+q6I635Y+W6auY5Lqu55qERE9N77yM5ZCm5YiZ5Lya5b2x5ZONa2/mjIfku6RcclxuICB0aGlzLiRlbCA9IGVsLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1szXVxyXG4gIHRoaXMuY29kZSA9IHBhcmFtcy5jb2RlXHJcbiAgdGhpcy5jb3B5ID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY2xpcGJvYXJkID0gbmV3IENsaXBib2FyZCgnLmNvcHknLCB7XHJcbiAgICAgIHRleHQgKCkge1xyXG4gICAgICAgIHJldHVybiBwYXJhbXMuY29kZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgY2xpcGJvYXJkLm9uKCdzdWNjZXNzJywgKGUpID0+IHtcclxuICAgICAgZS5jbGVhclNlbGVjdGlvbigpXHJcbiAgICAgIGNsaXBib2FyZC5kZXN0cm95KClcclxuICAgICAgd2luZG93LmFsZXJ0KCfku6PnoIHlt7LlpI3liLbliLDliarotLTmnb8nKVxyXG4gICAgfSlcclxuICB9XHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBobGpzLmhpZ2hsaWdodEJsb2NrKHRoaXMuJGVsKVxyXG4gIH0pXHJcbn1cclxua28uY29tcG9uZW50cy5yZWdpc3RlcigneS1jb2RlJywge1xyXG4gIHZpZXdNb2RlbDoge1xyXG4gICAgY3JlYXRlVmlld01vZGVsOiBmdW5jdGlvbiAocGFyYW1zLCBjb21wb25lbnRJbmZvKSB7XHJcbiAgICAgIHJldHVybiBuZXcgSW5pdChwYXJhbXMsIGNvbXBvbmVudEluZm8uZWxlbWVudClcclxuICAgIH1cclxuICB9LFxyXG4gIHRlbXBsYXRlOiB0cGxcclxufSlcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvY29kZS9pbmRleC5qcyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjb2RlXFxcIj5cXHJcXG4gIDxkaXYgY2xhc3M9XFxcInRvb2xzXFxcIj5cXHJcXG4gICAgPGkgY2xhc3M9XFxcImZhIGZhLWNsaXBib2FyZCBjb3B5XFxcIiBkYXRhLWJpbmQ9XFxcImNsaWNrOiBjb3B5XFxcIj48L2k+XFxyXFxuICA8L2Rpdj5cXHJcXG4gIDxwcmU+PGNvZGUgY2xhc3M9XFxcImh0bWxcXFwiIGRhdGEtYmluZD1cXFwidGV4dDogY29kZVxcXCI+PC9jb2RlPjwvcHJlPlxcclxcbjwvZGl2PlxcclxcblwiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvY29kZS9pbmRleC5odG1sXG4vLyBtb2R1bGUgaWQgPSA0NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSAyIDMgNCA1IDYgNyA4IDkgMTAgMTEgMTIgMTMgMTQgMTUgMTYgMTcgMTggMTkgMjAgMjEgMjIgMjMgMjQgMjUiLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoWydtb2R1bGUnLCAnLi9jbGlwYm9hcmQtYWN0aW9uJywgJ3RpbnktZW1pdHRlcicsICdnb29kLWxpc3RlbmVyJ10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgZmFjdG9yeShtb2R1bGUsIHJlcXVpcmUoJy4vY2xpcGJvYXJkLWFjdGlvbicpLCByZXF1aXJlKCd0aW55LWVtaXR0ZXInKSwgcmVxdWlyZSgnZ29vZC1saXN0ZW5lcicpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbW9kID0ge1xuICAgICAgICAgICAgZXhwb3J0czoge31cbiAgICAgICAgfTtcbiAgICAgICAgZmFjdG9yeShtb2QsIGdsb2JhbC5jbGlwYm9hcmRBY3Rpb24sIGdsb2JhbC50aW55RW1pdHRlciwgZ2xvYmFsLmdvb2RMaXN0ZW5lcik7XG4gICAgICAgIGdsb2JhbC5jbGlwYm9hcmQgPSBtb2QuZXhwb3J0cztcbiAgICB9XG59KSh0aGlzLCBmdW5jdGlvbiAobW9kdWxlLCBfY2xpcGJvYXJkQWN0aW9uLCBfdGlueUVtaXR0ZXIsIF9nb29kTGlzdGVuZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgX2NsaXBib2FyZEFjdGlvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGlwYm9hcmRBY3Rpb24pO1xuXG4gICAgdmFyIF90aW55RW1pdHRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90aW55RW1pdHRlcik7XG5cbiAgICB2YXIgX2dvb2RMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29kTGlzdGVuZXIpO1xuXG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG9ialxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICAgIH0gOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gICAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICAgICAgICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgICAgICAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICAgICAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICBmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gICAgICAgIGlmICghc2VsZikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBzdWJDbGFzcyxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbiAgICB9XG5cbiAgICB2YXIgQ2xpcGJvYXJkID0gZnVuY3Rpb24gKF9FbWl0dGVyKSB7XG4gICAgICAgIF9pbmhlcml0cyhDbGlwYm9hcmQsIF9FbWl0dGVyKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd8SFRNTEVsZW1lbnR8SFRNTENvbGxlY3Rpb258Tm9kZUxpc3R9IHRyaWdnZXJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIENsaXBib2FyZCh0cmlnZ2VyLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2xpcGJvYXJkKTtcblxuICAgICAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENsaXBib2FyZC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENsaXBib2FyZCkpLmNhbGwodGhpcykpO1xuXG4gICAgICAgICAgICBfdGhpcy5yZXNvbHZlT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgICAgIF90aGlzLmxpc3RlbkNsaWNrKHRyaWdnZXIpO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgaWYgYXR0cmlidXRlcyB3b3VsZCBiZSByZXNvbHZlZCB1c2luZyBpbnRlcm5hbCBzZXR0ZXIgZnVuY3Rpb25zXG4gICAgICAgICAqIG9yIGN1c3RvbSBmdW5jdGlvbnMgdGhhdCB3ZXJlIHBhc3NlZCBpbiB0aGUgY29uc3RydWN0b3IuXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICAgICAqL1xuXG5cbiAgICAgICAgX2NyZWF0ZUNsYXNzKENsaXBib2FyZCwgW3tcbiAgICAgICAgICAgIGtleTogJ3Jlc29sdmVPcHRpb25zJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXNvbHZlT3B0aW9ucygpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbiA9IHR5cGVvZiBvcHRpb25zLmFjdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IG9wdGlvbnMuYWN0aW9uIDogdGhpcy5kZWZhdWx0QWN0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdHlwZW9mIG9wdGlvbnMudGFyZ2V0ID09PSAnZnVuY3Rpb24nID8gb3B0aW9ucy50YXJnZXQgOiB0aGlzLmRlZmF1bHRUYXJnZXQ7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gdHlwZW9mIG9wdGlvbnMudGV4dCA9PT0gJ2Z1bmN0aW9uJyA/IG9wdGlvbnMudGV4dCA6IHRoaXMuZGVmYXVsdFRleHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBfdHlwZW9mKG9wdGlvbnMuY29udGFpbmVyKSA9PT0gJ29iamVjdCcgPyBvcHRpb25zLmNvbnRhaW5lciA6IGRvY3VtZW50LmJvZHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2xpc3RlbkNsaWNrJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsaXN0ZW5DbGljayh0cmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVyID0gKDAsIF9nb29kTGlzdGVuZXIyLmRlZmF1bHQpKHRyaWdnZXIsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIub25DbGljayhlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnb25DbGljaycsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyaWdnZXIgPSBlLmRlbGVnYXRlVGFyZ2V0IHx8IGUuY3VycmVudFRhcmdldDtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaXBib2FyZEFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaXBib2FyZEFjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5jbGlwYm9hcmRBY3Rpb24gPSBuZXcgX2NsaXBib2FyZEFjdGlvbjIuZGVmYXVsdCh7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogdGhpcy5hY3Rpb24odHJpZ2dlciksXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy50YXJnZXQodHJpZ2dlciksXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dCh0cmlnZ2VyKSxcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLmNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogdHJpZ2dlcixcbiAgICAgICAgICAgICAgICAgICAgZW1pdHRlcjogdGhpc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdkZWZhdWx0QWN0aW9uJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWZhdWx0QWN0aW9uKHRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QXR0cmlidXRlVmFsdWUoJ2FjdGlvbicsIHRyaWdnZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdkZWZhdWx0VGFyZ2V0JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWZhdWx0VGFyZ2V0KHRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBnZXRBdHRyaWJ1dGVWYWx1ZSgndGFyZ2V0JywgdHJpZ2dlcik7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnZGVmYXVsdFRleHQnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlZmF1bHRUZXh0KHRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QXR0cmlidXRlVmFsdWUoJ3RleHQnLCB0cmlnZ2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnZGVzdHJveScsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVyLmRlc3Ryb3koKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaXBib2FyZEFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaXBib2FyZEFjdGlvbi5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpcGJvYXJkQWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1dLCBbe1xuICAgICAgICAgICAga2V5OiAnaXNTdXBwb3J0ZWQnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xuICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFsnY29weScsICdjdXQnXTtcblxuICAgICAgICAgICAgICAgIHZhciBhY3Rpb25zID0gdHlwZW9mIGFjdGlvbiA9PT0gJ3N0cmluZycgPyBbYWN0aW9uXSA6IGFjdGlvbjtcbiAgICAgICAgICAgICAgICB2YXIgc3VwcG9ydCA9ICEhZG9jdW1lbnQucXVlcnlDb21tYW5kU3VwcG9ydGVkO1xuXG4gICAgICAgICAgICAgICAgYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydCA9IHN1cHBvcnQgJiYgISFkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoYWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBwb3J0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XSk7XG5cbiAgICAgICAgcmV0dXJuIENsaXBib2FyZDtcbiAgICB9KF90aW55RW1pdHRlcjIuZGVmYXVsdCk7XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gcmV0cmlldmUgYXR0cmlidXRlIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdWZmaXhcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRBdHRyaWJ1dGVWYWx1ZShzdWZmaXgsIGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZSA9ICdkYXRhLWNsaXBib2FyZC0nICsgc3VmZml4O1xuXG4gICAgICAgIGlmICghZWxlbWVudC5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgfVxuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBDbGlwYm9hcmQ7XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGlwYm9hcmQvbGliL2NsaXBib2FyZC5qc1xuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEgMiAzIDQgNSA2IDcgOCA5IDEwIDExIDEyIDEzIDE0IDE1IDE2IDE3IDE4IDE5IDIwIDIxIDIyIDIzIDI0IDI1IiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFsnbW9kdWxlJywgJ3NlbGVjdCddLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGZhY3RvcnkobW9kdWxlLCByZXF1aXJlKCdzZWxlY3QnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG1vZCA9IHtcbiAgICAgICAgICAgIGV4cG9ydHM6IHt9XG4gICAgICAgIH07XG4gICAgICAgIGZhY3RvcnkobW9kLCBnbG9iYWwuc2VsZWN0KTtcbiAgICAgICAgZ2xvYmFsLmNsaXBib2FyZEFjdGlvbiA9IG1vZC5leHBvcnRzO1xuICAgIH1cbn0pKHRoaXMsIGZ1bmN0aW9uIChtb2R1bGUsIF9zZWxlY3QpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgX3NlbGVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWxlY3QpO1xuXG4gICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG9ialxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICAgIH0gOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gICAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICAgICAgICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgICAgICAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICAgICAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICB2YXIgQ2xpcGJvYXJkQWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIENsaXBib2FyZEFjdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2xpcGJvYXJkQWN0aW9uKTtcblxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFNlbGVjdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgYmFzZSBwcm9wZXJ0aWVzIHBhc3NlZCBmcm9tIGNvbnN0cnVjdG9yLlxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAgICAgKi9cblxuXG4gICAgICAgIF9jcmVhdGVDbGFzcyhDbGlwYm9hcmRBY3Rpb24sIFt7XG4gICAgICAgICAgICBrZXk6ICdyZXNvbHZlT3B0aW9ucycsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZU9wdGlvbnMoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSBvcHRpb25zLmFjdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdHRlciA9IG9wdGlvbnMuZW1pdHRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldCA9IG9wdGlvbnMudGFyZ2V0O1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dCA9IG9wdGlvbnMudGV4dDtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIgPSBvcHRpb25zLnRyaWdnZXI7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGV4dCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdpbml0U2VsZWN0aW9uJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0U2VsZWN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RGYWtlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnc2VsZWN0RmFrZScsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0RmFrZSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgdmFyIGlzUlRMID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGlyJykgPT0gJ3J0bCc7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZha2UoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZUZha2UoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUhhbmRsZXIgPSB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjaykgfHwgdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgem9vbWluZyBvbiBpT1NcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtLnN0eWxlLmZvbnRTaXplID0gJzEycHQnO1xuICAgICAgICAgICAgICAgIC8vIFJlc2V0IGJveCBtb2RlbFxuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUVsZW0uc3R5bGUuYm9yZGVyID0gJzAnO1xuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUVsZW0uc3R5bGUucGFkZGluZyA9ICcwJztcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtLnN0eWxlLm1hcmdpbiA9ICcwJztcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIGVsZW1lbnQgb3V0IG9mIHNjcmVlbiBob3Jpem9udGFsbHlcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtLnN0eWxlW2lzUlRMID8gJ3JpZ2h0JyA6ICdsZWZ0J10gPSAnLTk5OTlweCc7XG4gICAgICAgICAgICAgICAgLy8gTW92ZSBlbGVtZW50IHRvIHRoZSBzYW1lIHBvc2l0aW9uIHZlcnRpY2FsbHlcbiAgICAgICAgICAgICAgICB2YXIgeVBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgdGhpcy5mYWtlRWxlbS5zdHlsZS50b3AgPSB5UG9zaXRpb24gKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5mYWtlRWxlbS5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JywgJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmFrZUVsZW0udmFsdWUgPSB0aGlzLnRleHQ7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmZha2VFbGVtKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUZXh0ID0gKDAsIF9zZWxlY3QyLmRlZmF1bHQpKHRoaXMuZmFrZUVsZW0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY29weVRleHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAncmVtb3ZlRmFrZScsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRmFrZSgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mYWtlSGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZmFrZUhhbmRsZXJDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmFrZUhhbmRsZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZha2VIYW5kbGVyQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZha2VFbGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuZmFrZUVsZW0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZha2VFbGVtID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ3NlbGVjdFRhcmdldCcsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0VGFyZ2V0KCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUZXh0ID0gKDAsIF9zZWxlY3QyLmRlZmF1bHQpKHRoaXMudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvcHlUZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2NvcHlUZXh0JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb3B5VGV4dCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VjY2VlZGVkID0gdm9pZCAwO1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VlZGVkID0gZG9jdW1lbnQuZXhlY0NvbW1hbmQodGhpcy5hY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZWVkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc3VsdChzdWNjZWVkZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdoYW5kbGVSZXN1bHQnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVJlc3VsdChzdWNjZWVkZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXIuZW1pdChzdWNjZWVkZWQgPyAnc3VjY2VzcycgOiAnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogdGhpcy5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuc2VsZWN0ZWRUZXh0LFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiB0aGlzLnRyaWdnZXIsXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyU2VsZWN0aW9uOiB0aGlzLmNsZWFyU2VsZWN0aW9uLmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnY2xlYXJTZWxlY3Rpb24nLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyaWdnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdkZXN0cm95JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRmFrZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdhY3Rpb24nLFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ2NvcHknO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fYWN0aW9uID0gYWN0aW9uO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2FjdGlvbiAhPT0gJ2NvcHknICYmIHRoaXMuX2FjdGlvbiAhPT0gJ2N1dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFwiYWN0aW9uXCIgdmFsdWUsIHVzZSBlaXRoZXIgXCJjb3B5XCIgb3IgXCJjdXRcIicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICd0YXJnZXQnLFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgKHR5cGVvZiB0YXJnZXQgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHRhcmdldCkpID09PSAnb2JqZWN0JyAmJiB0YXJnZXQubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbiA9PT0gJ2NvcHknICYmIHRhcmdldC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgXCJ0YXJnZXRcIiBhdHRyaWJ1dGUuIFBsZWFzZSB1c2UgXCJyZWFkb25seVwiIGluc3RlYWQgb2YgXCJkaXNhYmxlZFwiIGF0dHJpYnV0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3Rpb24gPT09ICdjdXQnICYmICh0YXJnZXQuaGFzQXR0cmlidXRlKCdyZWFkb25seScpIHx8IHRhcmdldC5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFwidGFyZ2V0XCIgYXR0cmlidXRlLiBZb3UgY2FuXFwndCBjdXQgdGV4dCBmcm9tIGVsZW1lbnRzIHdpdGggXCJyZWFkb25seVwiIG9yIFwiZGlzYWJsZWRcIiBhdHRyaWJ1dGVzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhcmdldCA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBcInRhcmdldFwiIHZhbHVlLCB1c2UgYSB2YWxpZCBFbGVtZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV0pO1xuXG4gICAgICAgIHJldHVybiBDbGlwYm9hcmRBY3Rpb247XG4gICAgfSgpO1xuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBDbGlwYm9hcmRBY3Rpb247XG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGlwYm9hcmQvbGliL2NsaXBib2FyZC1hY3Rpb24uanNcbi8vIG1vZHVsZSBpZCA9IDQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIDIgMyA0IDUgNiA3IDggOSAxMCAxMSAxMiAxMyAxNCAxNSAxNiAxNyAxOCAxOSAyMCAyMSAyMiAyMyAyNCAyNSIsImZ1bmN0aW9uIHNlbGVjdChlbGVtZW50KSB7XG4gICAgdmFyIHNlbGVjdGVkVGV4dDtcblxuICAgIGlmIChlbGVtZW50Lm5vZGVOYW1lID09PSAnU0VMRUNUJykge1xuICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG5cbiAgICAgICAgc2VsZWN0ZWRUZXh0ID0gZWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZWxlbWVudC5ub2RlTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbGVtZW50Lm5vZGVOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgIHZhciBpc1JlYWRPbmx5ID0gZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3JlYWRvbmx5Jyk7XG5cbiAgICAgICAgaWYgKCFpc1JlYWRPbmx5KSB7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCAnJyk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICBlbGVtZW50LnNldFNlbGVjdGlvblJhbmdlKDAsIGVsZW1lbnQudmFsdWUubGVuZ3RoKTtcblxuICAgICAgICBpZiAoIWlzUmVhZE9ubHkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdyZWFkb25seScpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0ZWRUZXh0ID0gZWxlbWVudC52YWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJykpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG5cbiAgICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGVsZW1lbnQpO1xuICAgICAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG5cbiAgICAgICAgc2VsZWN0ZWRUZXh0ID0gc2VsZWN0aW9uLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGVjdGVkVGV4dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZWxlY3Q7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9zZWxlY3Qvc3JjL3NlbGVjdC5qc1xuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEgMiAzIDQgNSA2IDcgOCA5IDEwIDExIDEyIDEzIDE0IDE1IDE2IDE3IDE4IDE5IDIwIDIxIDIyIDIzIDI0IDI1IiwiZnVuY3Rpb24gRSAoKSB7XG4gIC8vIEtlZXAgdGhpcyBlbXB0eSBzbyBpdCdzIGVhc2llciB0byBpbmhlcml0IGZyb21cbiAgLy8gKHZpYSBodHRwczovL2dpdGh1Yi5jb20vbGlwc21hY2sgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRjb3JnYW4vdGlueS1lbWl0dGVyL2lzc3Vlcy8zKVxufVxuXG5FLnByb3RvdHlwZSA9IHtcbiAgb246IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaywgY3R4KSB7XG4gICAgdmFyIGUgPSB0aGlzLmUgfHwgKHRoaXMuZSA9IHt9KTtcblxuICAgIChlW25hbWVdIHx8IChlW25hbWVdID0gW10pKS5wdXNoKHtcbiAgICAgIGZuOiBjYWxsYmFjayxcbiAgICAgIGN0eDogY3R4XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICBvbmNlOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2ssIGN0eCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBmdW5jdGlvbiBsaXN0ZW5lciAoKSB7XG4gICAgICBzZWxmLm9mZihuYW1lLCBsaXN0ZW5lcik7XG4gICAgICBjYWxsYmFjay5hcHBseShjdHgsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIGxpc3RlbmVyLl8gPSBjYWxsYmFja1xuICAgIHJldHVybiB0aGlzLm9uKG5hbWUsIGxpc3RlbmVyLCBjdHgpO1xuICB9LFxuXG4gIGVtaXQ6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIGRhdGEgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIGV2dEFyciA9ICgodGhpcy5lIHx8ICh0aGlzLmUgPSB7fSkpW25hbWVdIHx8IFtdKS5zbGljZSgpO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuID0gZXZ0QXJyLmxlbmd0aDtcblxuICAgIGZvciAoaTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBldnRBcnJbaV0uZm4uYXBwbHkoZXZ0QXJyW2ldLmN0eCwgZGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgb2ZmOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgZSA9IHRoaXMuZSB8fCAodGhpcy5lID0ge30pO1xuICAgIHZhciBldnRzID0gZVtuYW1lXTtcbiAgICB2YXIgbGl2ZUV2ZW50cyA9IFtdO1xuXG4gICAgaWYgKGV2dHMgJiYgY2FsbGJhY2spIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBldnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChldnRzW2ldLmZuICE9PSBjYWxsYmFjayAmJiBldnRzW2ldLmZuLl8gIT09IGNhbGxiYWNrKVxuICAgICAgICAgIGxpdmVFdmVudHMucHVzaChldnRzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgZXZlbnQgZnJvbSBxdWV1ZSB0byBwcmV2ZW50IG1lbW9yeSBsZWFrXG4gICAgLy8gU3VnZ2VzdGVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9sYXpkXG4gICAgLy8gUmVmOiBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRjb3JnYW4vdGlueS1lbWl0dGVyL2NvbW1pdC9jNmViZmFhOWJjOTczYjMzZDExMGE4NGEzMDc3NDJiN2NmOTRjOTUzI2NvbW1pdGNvbW1lbnQtNTAyNDkxMFxuXG4gICAgKGxpdmVFdmVudHMubGVuZ3RoKVxuICAgICAgPyBlW25hbWVdID0gbGl2ZUV2ZW50c1xuICAgICAgOiBkZWxldGUgZVtuYW1lXTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy90aW55LWVtaXR0ZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIDIgMyA0IDUgNiA3IDggOSAxMCAxMSAxMiAxMyAxNCAxNSAxNiAxNyAxOCAxOSAyMCAyMSAyMiAyMyAyNCAyNSIsInZhciBpcyA9IHJlcXVpcmUoJy4vaXMnKTtcbnZhciBkZWxlZ2F0ZSA9IHJlcXVpcmUoJ2RlbGVnYXRlJyk7XG5cbi8qKlxuICogVmFsaWRhdGVzIGFsbCBwYXJhbXMgYW5kIGNhbGxzIHRoZSByaWdodFxuICogbGlzdGVuZXIgZnVuY3Rpb24gYmFzZWQgb24gaXRzIHRhcmdldCB0eXBlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEhUTUxFbGVtZW50fEhUTUxDb2xsZWN0aW9ufE5vZGVMaXN0fSB0YXJnZXRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBsaXN0ZW4odGFyZ2V0LCB0eXBlLCBjYWxsYmFjaykge1xuICAgIGlmICghdGFyZ2V0ICYmICF0eXBlICYmICFjYWxsYmFjaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgYXJndW1lbnRzJyk7XG4gICAgfVxuXG4gICAgaWYgKCFpcy5zdHJpbmcodHlwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignU2Vjb25kIGFyZ3VtZW50IG11c3QgYmUgYSBTdHJpbmcnKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzLmZuKGNhbGxiYWNrKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGlyZCBhcmd1bWVudCBtdXN0IGJlIGEgRnVuY3Rpb24nKTtcbiAgICB9XG5cbiAgICBpZiAoaXMubm9kZSh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiBsaXN0ZW5Ob2RlKHRhcmdldCwgdHlwZSwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBlbHNlIGlmIChpcy5ub2RlTGlzdCh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiBsaXN0ZW5Ob2RlTGlzdCh0YXJnZXQsIHR5cGUsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXMuc3RyaW5nKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIGxpc3RlblNlbGVjdG9yKHRhcmdldCwgdHlwZSwgY2FsbGJhY2spO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIFN0cmluZywgSFRNTEVsZW1lbnQsIEhUTUxDb2xsZWN0aW9uLCBvciBOb2RlTGlzdCcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBZGRzIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGEgSFRNTCBlbGVtZW50XG4gKiBhbmQgcmV0dXJucyBhIHJlbW92ZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gbGlzdGVuTm9kZShub2RlLCB0eXBlLCBjYWxsYmFjaykge1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjayk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGEgbGlzdCBvZiBIVE1MIGVsZW1lbnRzXG4gKiBhbmQgcmV0dXJucyBhIHJlbW92ZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fEhUTUxDb2xsZWN0aW9ufSBub2RlTGlzdFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGxpc3Rlbk5vZGVMaXN0KG5vZGVMaXN0LCB0eXBlLCBjYWxsYmFjaykge1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwobm9kZUxpc3QsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChub2RlTGlzdCwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgdG8gYSBzZWxlY3RvclxuICogYW5kIHJldHVybnMgYSByZW1vdmUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gbGlzdGVuU2VsZWN0b3Ioc2VsZWN0b3IsIHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGRlbGVnYXRlKGRvY3VtZW50LmJvZHksIHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjayk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlzdGVuO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZ29vZC1saXN0ZW5lci9zcmMvbGlzdGVuLmpzXG4vLyBtb2R1bGUgaWQgPSA1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSAyIDMgNCA1IDYgNyA4IDkgMTAgMTEgMTIgMTMgMTQgMTUgMTYgMTcgMTggMTkgMjAgMjEgMjIgMjMgMjQgMjUiLCIvKipcbiAqIENoZWNrIGlmIGFyZ3VtZW50IGlzIGEgSFRNTCBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZXhwb3J0cy5ub2RlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAmJiB2YWx1ZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50XG4gICAgICAgICYmIHZhbHVlLm5vZGVUeXBlID09PSAxO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhcmd1bWVudCBpcyBhIGxpc3Qgb2YgSFRNTCBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsdWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmV4cG9ydHMubm9kZUxpc3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciB0eXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcblxuICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICYmICh0eXBlID09PSAnW29iamVjdCBOb2RlTGlzdF0nIHx8IHR5cGUgPT09ICdbb2JqZWN0IEhUTUxDb2xsZWN0aW9uXScpXG4gICAgICAgICYmICgnbGVuZ3RoJyBpbiB2YWx1ZSlcbiAgICAgICAgJiYgKHZhbHVlLmxlbmd0aCA9PT0gMCB8fCBleHBvcnRzLm5vZGUodmFsdWVbMF0pKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYXJndW1lbnQgaXMgYSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLnN0cmluZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZydcbiAgICAgICAgfHwgdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmc7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGFyZ3VtZW50IGlzIGEgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnRzLmZuID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgdHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5cbiAgICByZXR1cm4gdHlwZSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9nb29kLWxpc3RlbmVyL3NyYy9pcy5qc1xuLy8gbW9kdWxlIGlkID0gNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEgMiAzIDQgNSA2IDcgOCA5IDEwIDExIDEyIDEzIDE0IDE1IDE2IDE3IDE4IDE5IDIwIDIxIDIyIDIzIDI0IDI1IiwidmFyIGNsb3Nlc3QgPSByZXF1aXJlKCcuL2Nsb3Nlc3QnKTtcblxuLyoqXG4gKiBEZWxlZ2F0ZXMgZXZlbnQgdG8gYSBzZWxlY3Rvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHVzZUNhcHR1cmVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gX2RlbGVnYXRlKGVsZW1lbnQsIHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjaywgdXNlQ2FwdHVyZSkge1xuICAgIHZhciBsaXN0ZW5lckZuID0gbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lckZuLCB1c2VDYXB0dXJlKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyRm4sIHVzZUNhcHR1cmUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIERlbGVnYXRlcyBldmVudCB0byBhIHNlbGVjdG9yLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd8QXJyYXl9IFtlbGVtZW50c11cbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWxlY3RvclxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHVzZUNhcHR1cmVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gZGVsZWdhdGUoZWxlbWVudHMsIHNlbGVjdG9yLCB0eXBlLCBjYWxsYmFjaywgdXNlQ2FwdHVyZSkge1xuICAgIC8vIEhhbmRsZSB0aGUgcmVndWxhciBFbGVtZW50IHVzYWdlXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50cy5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBfZGVsZWdhdGUuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgRWxlbWVudC1sZXNzIHVzYWdlLCBpdCBkZWZhdWx0cyB0byBnbG9iYWwgZGVsZWdhdGlvblxuICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBVc2UgYGRvY3VtZW50YCBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyLCB0aGVuIGFwcGx5IGFyZ3VtZW50c1xuICAgICAgICAvLyBUaGlzIGlzIGEgc2hvcnQgd2F5IHRvIC51bnNoaWZ0IGBhcmd1bWVudHNgIHdpdGhvdXQgcnVubmluZyBpbnRvIGRlb3B0aW1pemF0aW9uc1xuICAgICAgICByZXR1cm4gX2RlbGVnYXRlLmJpbmQobnVsbCwgZG9jdW1lbnQpLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIFNlbGVjdG9yLWJhc2VkIHVzYWdlXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnRzKTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgQXJyYXktbGlrZSBiYXNlZCB1c2FnZVxuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZWxlbWVudHMsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBfZGVsZWdhdGUoZWxlbWVudCwgc2VsZWN0b3IsIHR5cGUsIGNhbGxiYWNrLCB1c2VDYXB0dXJlKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBGaW5kcyBjbG9zZXN0IG1hdGNoIGFuZCBpbnZva2VzIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBsaXN0ZW5lcihlbGVtZW50LCBzZWxlY3RvciwgdHlwZSwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICBlLmRlbGVnYXRlVGFyZ2V0ID0gY2xvc2VzdChlLnRhcmdldCwgc2VsZWN0b3IpO1xuXG4gICAgICAgIGlmIChlLmRlbGVnYXRlVGFyZ2V0KSB7XG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKGVsZW1lbnQsIGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlbGVnYXRlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZGVsZWdhdGUvc3JjL2RlbGVnYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSAyIDMgNCA1IDYgNyA4IDkgMTAgMTEgMTIgMTMgMTQgMTUgMTYgMTcgMTggMTkgMjAgMjEgMjIgMjMgMjQgMjUiLCJ2YXIgRE9DVU1FTlRfTk9ERV9UWVBFID0gOTtcblxuLyoqXG4gKiBBIHBvbHlmaWxsIGZvciBFbGVtZW50Lm1hdGNoZXMoKVxuICovXG5pZiAodHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmICFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKSB7XG4gICAgdmFyIHByb3RvID0gRWxlbWVudC5wcm90b3R5cGU7XG5cbiAgICBwcm90by5tYXRjaGVzID0gcHJvdG8ubWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICAgICAgICAgIHByb3RvLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgICAgICAgICAgICAgICBwcm90by5tc01hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgICAgICAgICAgICAgICBwcm90by5vTWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICAgICAgICAgIHByb3RvLndlYmtpdE1hdGNoZXNTZWxlY3Rvcjtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBwYXJlbnQgdGhhdCBtYXRjaGVzIGEgc2VsZWN0b3IuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBjbG9zZXN0IChlbGVtZW50LCBzZWxlY3Rvcikge1xuICAgIHdoaWxlIChlbGVtZW50ICYmIGVsZW1lbnQubm9kZVR5cGUgIT09IERPQ1VNRU5UX05PREVfVFlQRSkge1xuICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQubWF0Y2hlcyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSkge1xuICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNsb3Nlc3Q7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kZWxlZ2F0ZS9zcmMvY2xvc2VzdC5qc1xuLy8gbW9kdWxlIGlkID0gNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEgMiAzIDQgNSA2IDcgOCA5IDEwIDExIDEyIDEzIDE0IDE1IDE2IDE3IDE4IDE5IDIwIDIxIDIyIDIzIDI0IDI1IiwiaW1wb3J0IHRwbCBmcm9tICcuL2luZGV4Lmh0bWwnXHJcbmltcG9ydCBrbyBmcm9tICdrbm9ja291dCdcclxuZnVuY3Rpb24gaW5pdCAocGFyYW1zKSB7XHJcbiAgdGhpcy5uYW1lID0gcGFyYW1zLm5hbWUgfHwgJydcclxuICB0aGlzLmxpbmsgPSBwYXJhbXMubGluayB8fCAnJ1xyXG59XHJcbmtvLmNvbXBvbmVudHMucmVnaXN0ZXIoJ3ktdGl0bGUnLCB7XHJcbiAgdmlld01vZGVsOiBpbml0LFxyXG4gIHRlbXBsYXRlOiB0cGxcclxufSlcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2NvbXBvbmVudHMvdGl0bGUvaW5kZXguanMiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGgxPlxcclxcbiAgPHNwYW4gZGF0YS1iaW5kPVxcXCJ0ZXh0OiBuYW1lXFxcIj48L3NwYW4+57uE5Lu2XFxyXFxuPC9oMT5cXHJcXG48IS0tIGtvIGlmOiBsaW5rLS0+XFxyXFxuPGgyPlxcclxcbiAgPGEgZGF0YS1iaW5kPVxcXCJhdHRyOiB7aHJlZjogbGlua31cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIiBzdHlsZT1cXFwiY29sb3I6ICMyYmFlZTlcXFwiPlxcclxcbiAgICA8c3BhbiBkYXRhLWJpbmQ9XFxcInRleHQ6IG5hbWVcXFwiPjwvc3Bhbj7nu4Tku7ZBUEnmlofmoaNcXHJcXG4gIDwvYT5cXHJcXG48L2gyPlxcclxcbjwhLS0gL2tvIC0tPlxcclxcbjxoMj7ku6PnoIHnpLrkvos8L2gyPlxcclxcblwiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudHMvdGl0bGUvaW5kZXguaHRtbFxuLy8gbW9kdWxlIGlkID0gNThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEgMiAzIDQgNSA2IDcgOCA5IDEwIDExIDEyIDEzIDE0IDE1IDE2IDE3IDE4IDE5IDIwIDIxIDIyIDIzIDI0IDI1IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcInktYm94XFxcIj5cXHJcXG4gIDx5LXRpdGxlIHBhcmFtcz1cXFwibmFtZTogJ21vZGVs5qih5oCB5qGGJywgbGluazogJ2h0dHBzOi8vZ2l0aHViLmNvbS95b255b3V5Yy9ibG9nL2lzc3Vlcy8zOCdcXFwiPjwveS10aXRsZT5cXHJcXG4gICAgPGRlbW8gcGFyYW1zPVxcXCJjb2RlOmNvZGVbMF1cXFwiPlxcclxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImNvZGUtdG9wXFxcIj5cXHJcXG4gICAgICAgIDx5LWJ1dHRvbiBwYXJhbXM9XFxcInR5cGU6J2dob3N0JywgY2xpY2s6JHBhcmVudC5zaG93TW9kYWxcXFwiPuaYvuekuuW8ueahhjwveS1idXR0b24+XFxyXFxuICAgICAgICA8eS1tb2RhbCBwYXJhbXM9XFxcInZpc2libGU6ICRwYXJlbnQubW9kYWxWaXNpYmxlLCB3aWR0aDonNzAwcHgnLCB0aXRsZTon5pmu6YCa55qETW9kYWzlr7nor53moYYnLCBvazogJHBhcmVudC5oYW5kbGVPa1xcXCI+XFxyXFxuICAgICAgICAgIDxwPuaIkeivtDwvcD5cXHJcXG4gICAgICAgICAgPHA+55+t5Y+R55+t5Y+RPC9wPlxcclxcbiAgICAgICAgICA8cD7lp5HlqJg8L3A+XFxyXFxuICAgICAgICA8L3ktbW9kYWw+XFxyXFxuICAgICAgPC9kaXY+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY29kZS1zcGxpdFxcXCI+XFxyXFxuICAgICAgICA8c3Bhbj7ln7rnoYDnlKjms5U8L3NwYW4+XFxyXFxuICAgICAgPC9kaXY+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY29kZS1ib3R0b21cXFwiPlxcclxcbiAgICAgICAg5pyA566A5Y2V55qE5L2/55So5pa55rOV77yM6YCa6L+H5o6n5Yi25bGe5oCndmlzaWJsZeadpeaYvuekuiAvIOmakOiXj+WvueivneahhuOAgjxicj5cXHJcXG4gICAgICA8L2Rpdj5cXHJcXG4gICAgPC9kZW1vPlxcclxcblxcclxcbiAgICA8ZGVtbyBwYXJhbXM9XFxcImNvZGU6Y29kZVsxXVxcXCI+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY29kZS10b3BcXFwiPlxcclxcbiAgICAgICAgPHktYnV0dG9uIHBhcmFtcz1cXFwidHlwZTonZ2hvc3QnLCBjbGljazpmdW5jdGlvbigpeyRwYXJlbnQuc2hvd01vZGFsMSgkcGFyZW50cyl9XFxcIj7mmL7npLrlvLnmoYY8L3ktYnV0dG9uPlxcclxcbiAgICAgICAgPHktbW9kYWwgcGFyYW1zPVxcXCJ2aXNpYmxlOiAkcGFyZW50Lm1vZGFsVmlzaWJsZTEsIHdpZHRoOic3MDBweCcsdGl0bGU6J+a3u+WKoOagoemqjOeahE1vZGFs5a+56K+d5qGGJyx2YWxpZGF0ZUZuOiRyb290LnZhbGlkYXRlRm4sZXJyb3Jtc2c6J+ivt+iHs+WwkemAieaLqeS4gOadoeaVsOaNru+8gSdcXFwiPlxcclxcbiAgICAgICAgICA8eS1ncmlkIHBhcmFtcz1cXFwicmVmOidtb2RhbGdyaWQnLGNvbHVtbnM6ICRyb290LmNvbHVtbnMscm93czogJHJvb3Qucm93cyxvblJvd1NlbGVjdDokcm9vdC5vblJvd1NlbGVjdCxpc1N0cmlwZTp0cnVlXFxcIj48L3ktZ3JpZD5cXHJcXG4gICAgICAgIDwveS1tb2RhbD5cXHJcXG4gICAgICA8L2Rpdj5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJjb2RlLXNwbGl0XFxcIj5cXHJcXG4gICAgICAgIDxzcGFuPuagoemqjOWvueivneahhjwvc3Bhbj5cXHJcXG4gICAgICA8L2Rpdj5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJjb2RlLWJvdHRvbVxcXCI+XFxyXFxuICAgICAgICDnu5Hlrpptb2RhbOeahDxjb2RlPnZhbGlkYXRlRm48L2NvZGU+5LqL5Lu277yM6YCa6L+H6Ieq5a6a5LmJ6KeE5YiZ6Zi75q2i5qih5oCB5qGG55qE56Gu5a6a5LqL5Lu26Kem5Y+R5bm257uZ5Ye65o+Q56S644CCPGJyPlxcclxcbiAgICAgIDwvZGl2PlxcclxcbiAgICA8L2RlbW8+XFxyXFxuXFxyXFxuICAgIDxkZW1vIHBhcmFtcz1cXFwiY29kZTpjb2RlWzJdXFxcIj5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJjb2RlLXRvcFxcXCI+XFxyXFxuICAgICAgICA8eS1idXR0b24gcGFyYW1zPVxcXCJ0eXBlOidnaG9zdCcsIGNsaWNrOiRwYXJlbnQuc2hvd01vZGFsMlxcXCI+5pi+56S65by55qGGPC95LWJ1dHRvbj5cXHJcXG4gICAgICAgIDx5LW1vZGFsIHBhcmFtcz1cXFwidmlzaWJsZTogJHBhcmVudC5tb2RhbFZpc2libGUyLCB3aWR0aDonNzAwcHgnLHRpdGxlOifoh6rliqjpgILphY3pq5jluqbnmoRNb2RhbOWvueivneahhidcXFwiPlxcclxcbiAgICAgICAgICA8c3Bhbj7nmb7lrrblp5M6IDwvc3Bhbj5cXHJcXG4gICAgICAgICAgPHktZ3JpZCBwYXJhbXM9XFxcIm1vZGFsQm9keU1vZGFsSGVpZ2h0OmJvZHlNYXhIZWlnaHQsbW9kYWxCb2R5RXh0cmFIZWlnaHQ6JzIwcHgnLG9uUm93U2VsZWN0OiRyb290Lm9uUm93U2VsZWN0LGNvbHVtbnM6ICRyb290LmNvbHVtbnMscm93czogJHJvb3Qucm93czIsbG9ja2hlYWQ6dHJ1ZVxcXCI+PC95LWdyaWQ+XFxyXFxuICAgICAgICA8L3ktbW9kYWw+XFxyXFxuICAgICAgPC9kaXY+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY29kZS1zcGxpdFxcXCI+XFxyXFxuICAgICAgICA8c3Bhbj7oh6rliqjpgILphY3pq5jluqbnmoRNb2RhbOWvueivneahhjwvc3Bhbj5cXHJcXG4gICAgICA8L2Rpdj5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJjb2RlLWJvdHRvbVxcXCI+XFxyXFxuICAgICAgICDlsIZtb2RhbOeahDxjb2RlPmJvZHlNYXhIZWlnaHQ8L2NvZGU+5Lyg6YCS57uZ5LiL5bGC57uE5Lu255qEbW9kYWxCb2R5TW9kYWxIZWlnaHQo55uu5YmN5Y+q6YCC55So5LqOZ3JpZOe7hOS7tinvvIzkvb/lvpfkuIvlsYLnu4Tku7bnmoTpq5jluqboh6rliqjpgILphY3jgII8YnI+XFxyXFxuICAgICAgICBtb2RhbEJvZHlFeHRyYUhlaWdodOWxnuaAp++8jOaYr21vZGFs5YaF6YOo6Zmk5Y67Z3JpZOeahOmrmOW6puS7peWklui/mOacieWTquS6m+mrmOW6puimgeWOu+mZpO+8jOS+i+WmguacrOS+i+eahOeZvuWutuWnk+OAglxcclxcbiAgICAgIDwvZGl2PlxcclxcbiAgICA8L2RlbW8+XFxyXFxuICA8L2Rpdj5cXHJcXG5cIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy92aWV3cy9tb2RhbC9pbmRleC5odG1sXG4vLyBtb2R1bGUgaWQgPSA2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDEwIl0sInNvdXJjZVJvb3QiOiIifQ==